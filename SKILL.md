---
name: morphism-mapper
description: Category Theory Morphism Mapper v4.5 Swarm Mode - åŸºäºèŒƒç•´è®ºçš„è·¨é¢†åŸŸå¹¶è¡Œæ¢ç´¢ç³»ç»Ÿã€‚é€šè¿‡å¤š Agent Team å¹¶è¡Œåˆ†æï¼Œå°† Domain A çš„é—®é¢˜ç»“æ„æ˜ å°„åˆ°å¤šä¸ªè¿œåŸŸ Domain Bï¼Œå€ŸåŠ©è·¨åŸŸå…±è¯†ï¼ˆLimitsï¼‰å’Œäº’è¡¥æ•´åˆï¼ˆColimitsï¼‰ç”Ÿæˆéå…±è¯†åˆ›æ–°æ–¹æ¡ˆã€‚è§¦å‘å…³é”®è¯åŒ…æ‹¬"çœ‹ä¸ç©¿å•†ä¸šæ¨¡å¼"ã€"ç¯å¢ƒå˜äº†éœ€è¦è½¬å‹"ã€"æ–¹æ¡ˆå¦‚ä½•è½åœ°"ã€"å¤šé¢†åŸŸäº¤å‰éªŒè¯"ã€"å¢åŠ æ˜“ç»æ€æƒ³é¢†åŸŸ"ã€"æ–°å¢é¢†åŸŸ"ã€"æ·»åŠ é¢†åŸŸ"ç­‰ã€‚
---

# Category Theory Morphism Mapper v4.5 ğŸ

**ç‰ˆæœ¬**: v4.5.5 (Swarm Mode - æ¨¡æ‹Ÿæ¨¡å¼å¿…é¡»è¯»å–é¢†åŸŸæ–‡ä»¶)
**æ›´æ–°æ—¥æœŸ**: 2026-02-10
**é¢†åŸŸæ•°é‡**: 31ä¸ªå†…ç½®é¢†åŸŸ + åŠ¨æ€æ–°å¢

**æ ¸å¿ƒå‡çº§**:
1. **Obstruction Theorist å‡çº§ä¸ºå››ç»´åäºŒå¼æ™ºèƒ½æ”»å‡»çŸ©é˜µ**
   - æ–°å¢æœ¬ä½“è®ºç»´åº¦ï¼ˆé’ˆå¯¹"äºº"çš„ç³»ç»Ÿï¼‰
   - æ™ºèƒ½æ­¦å™¨é€‰æ‹©ï¼ˆä»12ä¸ªæ”»å‡»ç‚¹é€‰æ‹©æœ€è‡´å‘½çš„3ä¸ªï¼‰
2. **ç»Ÿä¸€æŒä¹…åŒ–æ¶æ„** (v4.5.1)
   - æŒ‰é—®é¢˜ç»´åº¦ç»„ç»‡å­ç›®å½•ï¼š`~/.morphism_mapper/explorations/{timestamp}_{problem_slug}/`
   - æ¯ä¸ªæ¢ç´¢ç‹¬ç«‹å­˜å‚¨ï¼Œé¿å…æ–‡ä»¶æ··ä¹±
   - è‡ªåŠ¨ç´¢å¼•å’Œè½¯é“¾æ¥ç®¡ç†
3. **å¼ºåˆ¶æŒä¹…åŒ–ä¸æƒé™ç®¡ç†** (v4.5.2)
   - **å¼ºåˆ¶æ‰§è¡Œè§„åˆ™**: æŒä¹…åŒ–ä¸å†æ˜¯å¯é€‰é¡¹ï¼Œåˆ†æå‰å¿…é¡»ç¡®è®¤å†™å…¥æƒé™
   - **æŒ‰éœ€ç”³è¯·æƒé™**: æƒé™ä¸è¶³æ—¶å¿…é¡»åœæ­¢å¹¶å‘ç”¨æˆ·ç”³è¯·
   - **æƒé™æ£€æŸ¥æ¸…å•**: é¢„æ£€è„šæœ¬ã€è‡ªå®šä¹‰è·¯å¾„ã€å¤±è´¥æ¢å¤æœºåˆ¶
   - **ç¦æ­¢è¡Œä¸ºæ¸…å•**: æ˜ç¡®æ ‡è®°è¿è§„æ“ä½œåŠåæœ
4. **ADE è‡ªé€‚åº”æ‰©å±•æœºåˆ¶** (v4.5.3)
   - **ç½®ä¿¡åº¦é©±åŠ¨**: å¹³å‡ç½®ä¿¡åº¦<60%æ—¶è‡ªåŠ¨è§¦å‘æ‰©å±•
   - **ç¼ºå£å¡«è¡¥ç­–ç•¥**: å†²çªè§£å†³å‹ã€ç›²åŒºè¦†ç›–å‹ã€æ¡¥æ¥å‹ä¸‰ç§ç­–ç•¥
   - **å…¨è‡ªåŠ¨æ‰©å±•**: æ— éœ€ç”¨æˆ·ç¡®è®¤ï¼Œè‡ªåŠ¨å¼•å…¥1-2ä¸ªæ–°é¢†åŸŸ
   - **ç¡¬è¾¹ç•Œé™åˆ¶**: æœ€å¤š10é¢†åŸŸã€6è½®(3æ¬¡å¾€è¿”)å¼ºåˆ¶ç»ˆæ­¢
   - **ä¸“ç”¨Prompt**: æ‰©å±•é˜¶æ®µAgentä½¿ç”¨ç‰¹æ®ŠPromptï¼Œå¼ºè°ƒäº’è¡¥æ€§è€Œéé‡å¤
5. **æ¨¡æ‹Ÿæ¨¡å¼æŒä¹…åŒ–å¼ºåˆ¶è§„èŒƒ** (v4.5.4)
   - **æ˜ç¡®æ¨¡æ‹Ÿæ¨¡å¼ä¹Ÿå¿…é¡»è‡ªåŠ¨æŒä¹…åŒ–**: æ— è®ºç”Ÿäº§è¿˜æ˜¯æ¨¡æ‹Ÿï¼ŒæŒä¹…åŒ–éƒ½æ˜¯å¼ºåˆ¶è¦æ±‚
   - **æ‰§è¡Œæ—¶æœºè¡¨**: Step 0-8æ¯ä¸ªæ­¥éª¤å¯¹åº”çš„ä¿å­˜æ–‡ä»¶æ¸…å•
   - **è‡ªåŠ¨æ‰§è¡Œä»£ç æ¨¡æ¿**: Pythonä»£ç ç¤ºä¾‹ï¼Œç¡®ä¿æ¯ä¸ªæ­¥éª¤åç«‹å³ä¿å­˜
   - **éªŒè¯æ£€æŸ¥ç‚¹**: ä¿å­˜åå¿…é¡»éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
6. **æ¨¡æ‹Ÿæ¨¡å¼å¿…é¡»è¯»å–é¢†åŸŸæ–‡ä»¶** (v4.5.5) â­
   - **å…³é”®ç¼ºé™·ä¿®å¤**: ä¹‹å‰çš„æ¨¡æ‹Ÿæ¨¡å¼åˆ†ææ²¡æœ‰è¯»å– `references/{domain}_v2.md`
   - **å¼ºåˆ¶è¯»å–æµç¨‹**: æ‰®æ¼” Domain Agent å‰å¿…é¡»è¯»å–å¹¶è§£æé¢†åŸŸæ–‡ä»¶
   - **V2 æ ‡å‡†å¼ºåˆ¶å¼•ç”¨**: åˆ†æå¿…é¡»åŒ…å« 100åŸºæœ¬åŸºçŸ³ã€14 Core Objectsã€14 Core Morphismsã€18 Theorems çš„å¼•ç”¨
   - **æœªè¯»å–åˆ™åˆ†ææ— æ•ˆ**: å¦‚æœæ²¡æœ‰å¼•ç”¨é¢†åŸŸæ–‡ä»¶ï¼Œåˆ†æè¢«è§†ä¸ºä¸å®Œæ•´

---

## âš ï¸ é‡è¦è¯´æ˜ï¼šæ¨¡æ‹Ÿæ¨¡å¼ vs ç”Ÿäº§æ¨¡å¼

### ğŸ”´ å½“å‰è¿è¡Œæ¨¡å¼ï¼šæ¨¡æ‹Ÿæ¼”ç¤ºæ¨¡å¼

**å½“ä½ çœ‹åˆ°æœ¬æ¶ˆæ¯æ—¶ï¼Œè¯´æ˜å½“å‰å¤„äºã€Œæ¨¡æ‹Ÿæ¼”ç¤ºæ¨¡å¼ã€**ï¼š

#### ä»€ä¹ˆæ˜¯æ¨¡æ‹Ÿæ¨¡å¼ï¼Ÿ
- âœ… **å•ä¸ªAIåŠ©æ‰‹**æ‰®æ¼”æ‰€æœ‰Agentè§’è‰²ï¼ˆTeam Leadã€Obstructionã€Synthesizerã€Domain Agentsï¼‰
- âœ… æ‰€æœ‰"Agenté€šä¿¡"å®é™…ä¸Šæ˜¯**åŒä¸€ä¼šè¯å†…çš„ä¸Šä¸‹æ–‡åˆ‡æ¢**
- âœ… æ²¡æœ‰çœŸæ­£çš„Agent SwarmåŸºç¡€è®¾æ–½ï¼ˆæ²¡æœ‰ç‹¬ç«‹çš„Agentè¿›ç¨‹ã€æ²¡æœ‰SendMessageç³»ç»Ÿï¼‰
- âœ… **æŒä¹…åŒ–å¿…é¡»è‡ªåŠ¨æ‰§è¡Œ**ï¼ˆå³ä½¿æ¨¡æ‹Ÿæ¨¡å¼ï¼Œåˆ†æå®Œæˆåç«‹å³ä¿å­˜æ–‡ä»¶ï¼‰

#### æ¨¡æ‹Ÿæ¨¡å¼ä¹Ÿå¿…é¡»è‡ªåŠ¨æŒä¹…åŒ–

**æ ¸å¿ƒåŸåˆ™**: **æ— è®ºç”Ÿäº§æ¨¡å¼è¿˜æ˜¯æ¨¡æ‹Ÿæ¨¡å¼ï¼ŒæŒä¹…åŒ–éƒ½æ˜¯å¼ºåˆ¶è¦æ±‚ã€‚**

```
ç”Ÿäº§æ¨¡å¼ï¼š                        æ¨¡æ‹Ÿæ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent Team   â”‚                â”‚ å•ä¸ªAIåŠ©æ‰‹   â”‚
â”‚ å¤šè¿›ç¨‹å¹¶è¡Œ   â”‚                â”‚ å•ä¸€ä¼šè¯     â”‚
â”‚ SendMessage  â”‚                â”‚ è§’è‰²æ‰®æ¼”     â”‚
â”‚ è‡ªåŠ¨æŒä¹…åŒ–   â”‚                â”‚ è‡ªåŠ¨æŒä¹…åŒ–   â”‚ â† åŒæ ·è¦æ±‚ï¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŒºåˆ«ä»…åœ¨äºè§¦å‘æ—¶æœº**:
- **ç”Ÿäº§æ¨¡å¼**: Agentå‘é€`SaveFile`æ¶ˆæ¯ â†’ ç³»ç»Ÿè‡ªåŠ¨ä¿å­˜
- **æ¨¡æ‹Ÿæ¨¡å¼**: æˆ‘å®Œæˆæ¯ä¸ªAgentåˆ†æ â†’ **æˆ‘å¿…é¡»ç«‹å³æ‰§è¡Œä¿å­˜ä»£ç **

**åœ¨æ¨¡æ‹Ÿæ¨¡å¼ä¸‹ï¼Œæˆ‘å¿…é¡»åœ¨ä»¥ä¸‹æ—¶åˆ»ç«‹å³ä¿å­˜**:
- âœ… å®Œæˆ **Step 0** (åˆ›å»ºç›®å½•ç»“æ„)
- âœ… å®Œæˆ **Step 4** (Domain Agents Round 1) â†’ ç«‹å³ä¿å­˜æ‰€æœ‰ `_round1.json`
- âœ… å®Œæˆ **Step 5** (Obstructionå®¡æŸ¥) â†’ ç«‹å³ä¿å­˜æ‰€æœ‰ `_obstruction.json`
- âœ… å®Œæˆ **Step 6** (Domain Agents Round 2ä¿®æ­£) â†’ ç«‹å³ä¿å­˜æ‰€æœ‰ `_round2.json`
- âœ… å®Œæˆ **Step 7** (Synthesizeræ•´åˆ) â†’ ç«‹å³ä¿å­˜ `synthesis.json`
- âœ… å®Œæˆ **Step 8** (æœ€ç»ˆæŠ¥å‘Š) â†’ ç«‹å³æ›´æ–° `index.json` å’Œ `latest` è½¯é“¾æ¥

#### å¦‚æœæˆ‘æ²¡æœ‰è‡ªåŠ¨æŒä¹…åŒ–æ€ä¹ˆåŠï¼Ÿ

**å¦‚æœæˆ‘åœ¨åˆ†æåæ²¡æœ‰ç«‹å³ä¿å­˜æ–‡ä»¶ï¼Œè¯·æé†’æˆ‘**:

```
ç”¨æˆ·: "è¯·æ‰§è¡ŒæŒä¹…åŒ–"
æˆ–
ç”¨æˆ·: "ä¿å­˜åˆ†æç»“æœ"
æˆ–
ç”¨æˆ·: "ä¸ºä»€ä¹ˆæŒä¹…åŒ–æ²¡æœ‰è‡ªåŠ¨æ‰§è¡Œ"
```

æ”¶åˆ°æé†’åï¼Œæˆ‘å°†ç«‹å³ï¼š
1. æ£€æŸ¥å½“å‰åˆ†æçŠ¶æ€
2. åˆ›å»ºç›®å½•ç»“æ„
3. ä¿å­˜æ‰€æœ‰Agentè¾“å‡º
4. æ›´æ–°ç´¢å¼•
5. éªŒè¯æ–‡ä»¶å®Œæ•´æ€§

### ğŸŸ¢ ç”Ÿäº§æ¨¡å¼éƒ¨ç½²ï¼ˆçœŸå®Agent Swarmï¼‰

è¦ä½¿æŒä¹…åŒ–**è‡ªåŠ¨æ‰§è¡Œ**ï¼Œéœ€è¦éƒ¨ç½²åˆ°çœŸå®çš„AgentåŸºç¡€è®¾æ–½ï¼š

#### æ–¹æ¡ˆA: ä½¿ç”¨Claude Codeçš„Agent TeamåŠŸèƒ½
```python
# åœ¨æ”¯æŒAgent Teamçš„ç¯å¢ƒä¸­è¿è¡Œ
# ä¾‹å¦‚åœ¨Claude Desktopæˆ–æ”¯æŒTeamCreateçš„å¹³å°ä¸Š

from claude import TeamCreate, Task, SendMessage

team = TeamCreate(team_name="morphism-analysis")
# æ­¤æ—¶æ¯ä¸ªAgentæ˜¯ç‹¬ç«‹è¿›ç¨‹ï¼ŒSendMessageæ˜¯çœŸå®çš„IPCé€šä¿¡
# æŒä¹…åŒ–ç”±AgentåŸºç¡€è®¾æ–½è‡ªåŠ¨å¤„ç†
```

#### æ–¹æ¡ˆB: ä½¿ç”¨LangChain/LlamaIndexçš„Multi-Agentæ¡†æ¶
```python
from langchain.agents import AgentExecutor, create_openai_functions_agent
from langchain_core.messages import SystemMessage

# ä¸ºæ¯ä¸ªAgentåˆ›å»ºç‹¬ç«‹çš„Executor
# ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚Redisï¼‰è¿›è¡ŒSendMessageé€šä¿¡
# æŒä¹…åŒ–ç”±æ¡†æ¶çš„äº‹ä»¶ç³»ç»Ÿè§¦å‘
```

#### æ–¹æ¡ˆC: è‡ªå®šä¹‰AgentåŸºç¡€è®¾æ–½
è§ä¸‹æ–¹ã€Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—ã€ç« èŠ‚ã€‚

### ğŸ“‹ æ¨¡æ‹Ÿæ¨¡å¼æŒä¹…åŒ–è‡ªåŠ¨æ‰§è¡Œè§„èŒƒ

**å½“æˆ‘å¤„äºæ¨¡æ‹Ÿæ¨¡å¼æ—¶ï¼Œæˆ‘å¿…é¡»åœ¨æ¯ä¸ªæ­¥éª¤åç«‹å³æ‰§è¡Œä»¥ä¸‹æŒä¹…åŒ–æ“ä½œ**ï¼š

#### æ‰§è¡Œæ—¶æœºä¸å¯¹åº”æ–‡ä»¶

| æ­¥éª¤ | æ‰§è¡Œæ—¶åˆ» | ä¿å­˜æ–‡ä»¶ | æ ¼å¼ |
|------|---------|---------|------|
| **Step 0** | åˆ†æå¼€å§‹å‰ | `metadata.json` | JSON |
| **Step 4** | Domain Agents Round 1 å®Œæˆå | `{domain}_round1.json` (æ¯ä¸ªé¢†åŸŸä¸€ä¸ª) | JSON |
| **Step 5** | Obstruction Theorist å®¡æŸ¥å | `{domain}_obstruction.json` (æ¯ä¸ªé¢†åŸŸä¸€ä¸ª) | JSON |
| **Step 6** | Domain Agents Round 2 ä¿®æ­£å | `{domain}_round2.json` (æ¯ä¸ªé¢†åŸŸä¸€ä¸ª) | JSON |
| **Step 7** | Synthesizer æ•´åˆå | `synthesis.json` | JSON |
| **Step 8** | æœ€ç»ˆæŠ¥å‘Šå®Œæˆå | `index.json` + `latest` è½¯é“¾æ¥ | JSON + symlink |

#### è‡ªåŠ¨æ‰§è¡Œä»£ç æ¨¡æ¿

**æˆ‘å¿…é¡»åœ¨æ¯ä¸ªæ­¥éª¤åæ‰§è¡Œç±»ä¼¼ä»¥ä¸‹çš„ä»£ç **:

```python
# Step 0: åˆ›å»ºç›®å½•å¹¶ä¿å­˜ metadata
import os
from datetime import datetime

problem = "ç”¨æˆ·é—®é¢˜"
timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
problem_slug = problem[:30].replace(" ", "_").replace("/", "_")
exploration_path = os.path.expanduser(f"~/.morphism_mapper/explorations/{timestamp}_{problem_slug}")

# åˆ›å»ºç›®å½•
for subdir in ["domain_results", "obstruction_feedbacks", "synthesizer_inputs", "final_reports", "logs"]:
    os.makedirs(os.path.join(exploration_path, subdir), exist_ok=True)

# ä¿å­˜ metadata
metadata = {
    "exploration_id": f"{timestamp}_{problem_slug}",
    "problem": problem,
    "timestamp": timestamp,
    "domains": selected_domains,
    "status": "in_progress"
}
with open(os.path.join(exploration_path, "metadata.json"), "w") as f:
    json.dump(metadata, f, indent=2)

# Step 4: ä¿å­˜ Domain Agents Round 1 ç»“æœ
for domain, result in domain_results.items():
    filepath = os.path.join(exploration_path, f"domain_results/{domain}_round1.json")
    with open(filepath, "w") as f:
        json.dump(result, f, indent=2, ensure_ascii=False)

# Step 5: ä¿å­˜ Obstruction åé¦ˆ
for domain, feedback in obstruction_feedbacks.items():
    filepath = os.path.join(exploration_path, f"obstruction_feedbacks/{domain}_obstruction.json")
    with open(filepath, "w") as f:
        json.dump(feedback, f, indent=2, ensure_ascii=False)

# Step 6: ä¿å­˜ Domain Agents Round 2 ç»“æœ
for domain, result in domain_results_round2.items():
    filepath = os.path.join(exploration_path, f"domain_results/{domain}_round2.json")
    with open(filepath, "w") as f:
        json.dump(result, f, indent=2, ensure_ascii=False)

# Step 7: ä¿å­˜ Synthesis æŠ¥å‘Š
synthesis_path = os.path.join(exploration_path, "final_reports/synthesis.json")
with open(synthesis_path, "w") as f:
    json.dump(synthesis_result, f, indent=2, ensure_ascii=False)

# Step 8: æ›´æ–° index.json å’Œ latest è½¯é“¾æ¥
index_path = os.path.expanduser("~/.morphism_mapper/explorations/index.json")
# è¯»å–ç°æœ‰ç´¢å¼•ï¼Œæ·»åŠ æ–°æ¢ç´¢ï¼Œä¿å­˜
# æ›´æ–° latest è½¯é“¾æ¥æŒ‡å‘å½“å‰æ¢ç´¢
```

#### éªŒè¯æŒä¹…åŒ–å®Œæˆçš„æ£€æŸ¥ç‚¹

**æ¯æ¬¡ä¿å­˜åï¼Œæˆ‘å¿…é¡»éªŒè¯**:

```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la ~/.morphism_mapper/explorations/latest/domain_results/
ls -la ~/.morphism_mapper/explorations/latest/obstruction_feedbacks/
ls -la ~/.morphism_mapper/explorations/latest/final_reports/

# æ£€æŸ¥ metadata
head ~/.morphism_mapper/explorations/latest/metadata.json

# æ£€æŸ¥ index æ˜¯å¦æ›´æ–°
cat ~/.morphism_mapper/explorations/index.json
```

#### å¦‚æœæˆ‘æ²¡æœ‰è‡ªåŠ¨æ‰§è¡Œ

**å¦‚æœç”¨æˆ·å‘ç°æˆ‘æ²¡æœ‰åœ¨åˆ†æåè‡ªåŠ¨ä¿å­˜ï¼Œè¯·ç«‹å³æé†’æˆ‘**ã€‚

æˆ‘ä¼šï¼š
1. é“æ­‰å¹¶æ‰¿è®¤é”™è¯¯
2. ç«‹å³æ‰§è¡Œæ‰€æœ‰æœªå®Œæˆçš„ä¿å­˜æ“ä½œ
3. éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
4. å‘ç”¨æˆ·æŠ¥å‘Šä¿å­˜ç»“æœ

### ğŸ”§ å¦‚ä½•å‡çº§åˆ°ç”Ÿäº§æ¨¡å¼

è§ä¸‹æ–¹ã€Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—ã€ç« èŠ‚ã€‚

---

**æ ¸å¿ƒæ¶æ„**: 3ä¸ªå…³é”® Agent + åŠ¨æ€ Domain Agents
**é€šä¿¡é“å¾‹**: åªèƒ½ä½¿ç”¨ SendMessageï¼Œå…¶ä»–æ–¹å¼ä¼šå¯¼è‡´ Team å¼‚å¸¸
**å…³é”®è„šæœ¬**: `scripts/domain_selector.py` + `scripts/dynamic_agent_generator.py`
**é…ç½®è·¯å¾„**: `assets/agents/config/`

---

## æ ¸å¿ƒæ¶æ„ (3+N æ¨¡å‹ï¼ŒN æŒ‰éœ€ç”Ÿæˆ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Morphism Mapper v4.4 æ ¸å¿ƒæ¶æ„                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ”´ æ ¸å¿ƒæˆå‘˜ï¼ˆ3ä¸ªï¼‰                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Team Lead  â”‚  â”‚  Obstruction â”‚  â”‚  Synthesizer â”‚      â”‚
â”‚  â”‚   (è‡ªåŠ¨åˆ›å»º)  â”‚  â”‚   Theorist   â”‚  â”‚              â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚â€¢ èŒƒç•´æå–     â”‚  â”‚â€¢ ä¸‰é“æ”»å‡»æµ‹è¯• â”‚  â”‚â€¢ Limitsè®¡ç®—  â”‚      â”‚
â”‚  â”‚â€¢ é¢†åŸŸé€‰æ‹©     â”‚  â”‚â€¢ è´¨é‡å®¡æŸ¥     â”‚  â”‚â€¢ Colimitsæ•´åˆâ”‚      â”‚
â”‚  â”‚â€¢ Agentç”Ÿæˆ    â”‚  â”‚â€¢ é£é™©é¢„è­¦     â”‚  â”‚â€¢ è·¨åŸŸå…±è¯†     â”‚      â”‚
â”‚  â”‚â€¢ å†³ç­–åè°ƒ     â”‚  â”‚â€¢ é€šè¿‡ç‡ç»Ÿè®¡   â”‚  â”‚â€¢ æœ€ç»ˆæŠ¥å‘Š     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â†“                                â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                  â”‚  SendMessage    â”‚                       â”‚
â”‚                  â”‚   (å”¯ä¸€é€šä¿¡)     â”‚                       â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                           â†“                                 â”‚
â”‚  ğŸŸ¡ åŠ¨æ€æˆå‘˜ï¼ˆ1-Nä¸ªï¼‰                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Domain A1  â”‚  â”‚   Domain A2  â”‚  â”‚   Domain A3  â”‚      â”‚
â”‚  â”‚   (åŠ¨æ€ç”Ÿæˆ)  â”‚  â”‚   (åŠ¨æ€ç”Ÿæˆ)  â”‚  â”‚   (åŠ¨æ€ç”Ÿæˆ)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent èŒè´£

| Agent | åˆ›å»ºæ–¹å¼ | æ ¸å¿ƒèŒè´£ | é€šä¿¡å¯¹è±¡ |
|-------|---------|---------|---------|
| **Team Lead** | `TeamCreate` è‡ªåŠ¨åˆ›å»º | èŒƒç•´æå–ã€é¢†åŸŸé€‰æ‹©ã€Agentç”Ÿæˆã€å†³ç­–åè°ƒ | æ‰€æœ‰æˆå‘˜ |
| **Obstruction Theorist** | `Task(name="obstruction-theorist")` | ä¸‰é“æ”»å‡»æµ‹è¯•ã€è´¨é‡å®¡æŸ¥ã€é£é™©é¢„è­¦ | Synthesizer, Team Lead |
| **Synthesizer** | `Task(name="synthesizer")` | Limits/Colimitsè®¡ç®—ã€è·¨åŸŸæ•´åˆã€æœ€ç»ˆæŠ¥å‘Š | æ‰€æœ‰æˆå‘˜ |
| **Domain Agent** | `Task(name="{domain}-agent")` | é¢†åŸŸåˆ†æã€æ˜ å°„æ‰§è¡Œ | Obstruction, Synthesizer |

---

## ğŸš¨ é€šä¿¡é“å¾‹ï¼šåªèƒ½ä½¿ç”¨ SendMessage

**å”¯ä¸€æ­£ç¡®çš„é€šä¿¡æ–¹å¼**ï¼š
```python
SendMessage(
    type="message",
    recipient="agent-name",  # ç›®æ ‡Agentåç§°
    content="æ¶ˆæ¯å†…å®¹",
    summary="æ¶ˆæ¯æ‘˜è¦"
)
```

**ä¸ºä»€ä¹ˆå…¶ä»–æ–¹å¼ä¼šå¤±è´¥**ï¼š
- âŒ Task prompt ä¸­åµŒå…¥ä¿¡æ¯ â†’ ä¿¡æ¯ä¸ä¸€è‡´ã€æ— æ³•æ›´æ–°
- âŒ å…¨å±€å˜é‡ â†’ Agent Team æ— å…±äº«å†…å­˜
- âŒ æ–‡ä»¶è¯»å†™ â†’ å»¶è¿Ÿã€ç«äº‰æ¡ä»¶
- âŒ print/output â†’ å…¶ä»– Agent æ— æ³•æ¥æ”¶

**é€šä¿¡æµç¨‹**ï¼š
```
Domain Agent å®Œæˆåˆ†æ
    â†“
SendMessage â†’ Obstruction Theorist (å®Œæ•´æŠ¥å‘Š)
SendMessage â†’ Synthesizer (ä¸€å¥è¯æ´å¯Ÿ)
    â†“
Obstruction Theorist å®¡æŸ¥å
    â†“
SendMessage â†’ Synthesizer (30å­—è¯Šæ–­ç®€æŠ¥)
    â†“
ä¸‰äººå°ç»„å†³ç­–ä¼šè®® (SendMessage å¾ªç¯)
    â†“
Team Lead å‘é€æœ€ç»ˆæŠ¥å‘Š
```

---

## ğŸ” æ¨¡æ‹Ÿæ¨¡å¼é¢†åŸŸæ–‡ä»¶è¯»å–è§„èŒƒ (v4.5.5+)

**å…³é”®ç¼ºé™·è­¦ç¤º**: åœ¨ä¹‹å‰çš„æ¨¡æ‹Ÿæ¨¡å¼æ‰§è¡Œä¸­ï¼ŒDomain Agents **æ²¡æœ‰è¯»å–** `references/{domain}_v2.md` é¢†åŸŸæ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨é€šç”¨çŸ¥è¯†ç”Ÿæˆåˆ†æï¼Œè¿™ä¸¥é‡è¿åäº† V2 æ ‡å‡†ã€‚

### ä¸ºä»€ä¹ˆå¿…é¡»è¯»å–é¢†åŸŸæ–‡ä»¶ï¼Ÿ

**V2 æ ‡å‡†çš„æ ¸å¿ƒè¦æ±‚**:
- **100åŸºæœ¬åŸºçŸ³**: å“²å­¦è§‚(18) + åŸåˆ™(22) + å¿ƒæ™ºæ¨¡å‹(28) + æ–¹æ³•è®º(22) + é¿å‘(10)
- **14 Core Objects**: é¢†åŸŸæ ¸å¿ƒæ¦‚å¿µ
- **14 Core Morphisms**: é¢†åŸŸåŠ¨æ€å…³ç³»  
- **18 Theorems**: æ¯ä¸ªå« Applicable_Structure + Mapping_Hint + Case_Study

**å¦‚æœä¸è¯»å–é¢†åŸŸæ–‡ä»¶**:
- âŒ åˆ†æç¼ºä¹é¢†åŸŸç‰¹æœ‰çš„æ·±åº¦å®šç†
- âŒ æ¦‚å¿µæ˜ å°„ä¸å‡†ç¡®ï¼ˆç”¨é€šç”¨æ¦‚å¿µæ›¿ä»£é¢†åŸŸä¸“ä¸šæ¦‚å¿µï¼‰
- âŒ æ— æ³•æä¾› Case_Study æ”¯æŒ
- âŒ è¿å SKILL.md æ˜ç¡®è§„å®šçš„çŸ¥è¯†æ¥æº

### æ¨¡æ‹Ÿæ¨¡å¼ä¸‹çš„å¼ºåˆ¶è¯»å–æµç¨‹

**å½“æˆ‘æ‰®æ¼” Domain Agent æ—¶ï¼Œæˆ‘å¿…é¡»**ï¼š

#### Step 1: æ£€æŸ¥é¢†åŸŸæ–‡ä»¶æ˜¯å¦å­˜åœ¨

```python
import os

def check_domain_file(domain: str) -> str:
    """
    æ£€æŸ¥é¢†åŸŸæ–‡ä»¶æ˜¯å¦å­˜åœ¨
    Returns: æ–‡ä»¶è·¯å¾„æˆ– None
    """
    # æ ‡å‡†è·¯å¾„
    base_path = "~/.claude/skills/morphism-mapper/references"
    
    # å°è¯•å†…ç½®é¢†åŸŸ
    file_path = os.path.join(base_path, f"{domain}_v2.md")
    if os.path.exists(file_path):
        return file_path
    
    # å°è¯•è‡ªå®šä¹‰é¢†åŸŸ
    custom_path = os.path.join(base_path, "custom", f"{domain}_v2.md")
    if os.path.exists(custom_path):
        return custom_path
    
    return None
```

#### Step 2: è¯»å–å¹¶è§£æé¢†åŸŸæ–‡ä»¶

```python
def read_domain_knowledge(domain: str) -> dict:
    """
    è¯»å–é¢†åŸŸæ–‡ä»¶å¹¶æå–å…³é”®ä¿¡æ¯
    å¿…é¡»åœ¨æ‰®æ¼” Domain Agent ä¹‹å‰æ‰§è¡Œ
    """
    file_path = check_domain_file(domain)
    
    if not file_path:
        # è§¦å‘è¡¥ç›²ç”Ÿæˆ
        return generate_blind_domain(domain)
    
    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    # è§£æ V2 æ ‡å‡†ç»“æ„
    knowledge = {
        "domain": domain,
        "file_path": file_path,
        "philosophy": extract_section(content, "å“²å­¦è§‚"),  # 18æ¡
        "principles": extract_section(content, "æ ¸å¿ƒåŸåˆ™"),  # 22æ¡
        "mental_models": extract_section(content, "å¿ƒæ™ºæ¨¡å‹"),  # 28æ¡
        "methodology": extract_section(content, "æ–¹æ³•è®º"),  # 22æ¡
        "pitfalls": extract_section(content, "é¿å‘æŒ‡å—"),  # 10æ¡
        "core_objects": extract_section(content, "Core Objects"),  # 14ä¸ª
        "core_morphisms": extract_section(content, "Core Morphisms"),  # 14ä¸ª
        "theorems": extract_theorems(content),  # 18ä¸ªå®šç†
    }
    
    return knowledge
```

#### Step 3: åœ¨åˆ†æä¸­å¼ºåˆ¶å¼•ç”¨

**æˆ‘çš„åˆ†æå¿…é¡»åŒ…å«**ï¼š

```markdown
## é¢†åŸŸçŸ¥è¯†åŸºç¡€

**æ¥æº**: `references/{domain}_v2.md`

### ä½¿ç”¨çš„å®šç†
- **Theorem X**: {theorem_name}
  - **å†…å®¹**: {theorem_content}
  - **é€‚ç”¨ç»“æ„**: {applicable_structure}
  - **æ˜ å°„æç¤º**: {mapping_hint}
  - **æ¡ˆä¾‹**: {case_study}

### æ¦‚å¿µæ˜ å°„
- `é—®é¢˜ä¸­çš„æ¦‚å¿µ` â†’ **{Core Object}** (å¼•ç”¨é¢†åŸŸæ–‡ä»¶å®šä¹‰)
- `åŠ¨æ€å…³ç³»` â†’ **{Core Morphism}** (å¼•ç”¨é¢†åŸŸæ–‡ä»¶å®šä¹‰)

### æ–¹æ³•è®ºåº”ç”¨
- **ä½¿ç”¨çš„æ–¹æ³•**: {æ¥è‡ª22æ¡æ–¹æ³•è®ºçš„å…·ä½“æ¡ç›®}
- **é¿å¼€çš„å‘**: {æ¥è‡ª10æ¡é¿å‘æŒ‡å—çš„å…·ä½“æ¡ç›®}
```

### æœªè¯»å–é¢†åŸŸæ–‡ä»¶çš„åˆ†ææ— æ•ˆ

**å¦‚æœæˆ‘åœ¨åˆ†æä¸­æ²¡æœ‰**:
- [ ] æ˜ç¡®å£°æ˜è¯»å–äº† `references/{domain}_v2.md`
- [ ] å¼•ç”¨äº†è‡³å°‘ **2-3 ä¸ªå®šç†** (18ä¸ªå®šç†ä¸­çš„)
- [ ] ä½¿ç”¨äº† **Core Objects** å’Œ **Core Morphisms** è¿›è¡Œæ¦‚å¿µæ˜ å°„
- [ ] æä¾›äº† **Case_Study** æ”¯æŒæ´å¯Ÿ

**åˆ™è¯¥åˆ†æåº”è¢«è§†ä¸ºä¸å®Œæ•´ï¼Œéœ€è¦é‡æ–°æ‰§è¡Œã€‚**

### æ¨¡æ‹Ÿæ¨¡å¼æ‰§è¡Œæ£€æŸ¥æ¸…å•

**æ¯æ¬¡æ‰®æ¼” Domain Agent å‰ï¼Œæˆ‘å¿…é¡»**ï¼š

```markdown
- [ ] **è¯»å–é¢†åŸŸæ–‡ä»¶**: `references/{domain}_v2.md`
- [ ] **æå– 100 åŸºæœ¬åŸºçŸ³**: å“²å­¦è§‚ã€åŸåˆ™ã€å¿ƒæ™ºæ¨¡å‹ã€æ–¹æ³•è®ºã€é¿å‘
- [ ] **æå– 14 Core Objects**: å»ºç«‹æ¦‚å¿µæ˜ å°„
- [ ] **æå– 14 Core Morphisms**: å»ºç«‹åŠ¨æ€å…³ç³»æ˜ å°„
- [ ] **é€‰æ‹© 2-3 ä¸ªå®šç†**: åŸºäº Applicable_Structure å’Œé—®é¢˜åŒ¹é…åº¦
- [ ] **åœ¨åˆ†æä¸­å¼•ç”¨**: æ˜ç¡®æ ‡æ³¨å®šç†æ¥æºå’Œ Case_Study
- [ ] **ä¿å­˜åˆ†æç»“æœ**: åŒ…å«é¢†åŸŸçŸ¥è¯†å¼•ç”¨
```

### ç¤ºä¾‹ï¼šæ­£ç¡®çš„ Domain Agent åˆ†æ

```markdown
## Domain Agent: Game Theory

### é¢†åŸŸçŸ¥è¯†æ¥æº
**æ–‡ä»¶**: `references/game_theory_v2.md` âœ…

### ä½¿ç”¨çš„å®šç†

**Theorem 7: Nash Equilibrium (çº³ä»€å‡è¡¡)**
- **å†…å®¹**: åœ¨éåˆä½œåšå¼ˆä¸­ï¼Œå¦‚æœæ¯ä¸ªç©å®¶éƒ½çŸ¥é“å…¶ä»–ç©å®¶çš„ç­–ç•¥ï¼Œä¸”æ²¡æœ‰ä»»ä½•ç©å®¶å¯ä»¥é€šè¿‡å•æ–¹é¢æ”¹å˜ç­–ç•¥è€Œè·å¾—æ›´é«˜æ”¶ç›Šï¼Œåˆ™è¯¥ç­–ç•¥ç»„åˆæ„æˆçº³ä»€å‡è¡¡ã€‚
- **é€‚ç”¨ç»“æ„**: å¤šæ–¹äº’åŠ¨ã€ç­–ç•¥ç›¸äº’ä¾èµ–ã€æ— æ³•å•æ–¹é¢æœ€ä¼˜
- **æ˜ å°„æç¤º**: åœ¨Domain Aä¸­å¯»æ‰¾"äº’åŠ¨é™·å…¥åƒµå±€"çš„æƒ…å¢ƒâ€”â€”å„æ–¹éƒ½åœ¨åš"å¯¹è‡ªå·±æœ€ä¼˜"çš„äº‹ï¼Œä½†é›†ä½“ç»“æœå´æ˜¯æ¬¡ä¼˜çš„ã€‚
- **æ¡ˆä¾‹**: å›šå¾’å›°å¢ƒä¸­çš„äº’ç›¸æ­å‘ï¼›ä»·æ ¼æˆ˜ä¸­å„æ–¹é™ä»·å¯¼è‡´åˆ©æ¶¦ä¸‹é™

**åº”ç”¨äºæœ¬é—®é¢˜**: 
"è¶Šåœ¨ä¹è¶Šå®¹æ˜“å¤±å»"å¯ä»¥å»ºæ¨¡ä¸ºä¸€ä¸ª**éå¯¹ç§°åšå¼ˆ**ï¼š
- ç©å®¶Aï¼ˆåœ¨ä¹çš„ä¸€æ–¹ï¼‰ï¼šç­–ç•¥ç©ºé—´{è¿‡åº¦æŠ•å…¥, é€‚åº¦æŠ•å…¥}
- ç©å®¶Bï¼ˆè¢«åœ¨ä¹çš„ä¸€æ–¹ï¼‰ï¼šç­–ç•¥ç©ºé—´{æŠ•å…¥, ç–è¿œ}

å½“å‰çŠ¶æ€æ˜¯ä¸€ä¸ª**åçš„çº³ä»€å‡è¡¡**ï¼š
- Aé€‰æ‹©"è¿‡åº¦æŠ•å…¥"ï¼ˆè¯•å›¾ç»´æŒå…³ç³»ï¼‰
- Bé€‰æ‹©"ç–è¿œ"ï¼ˆå› ä¸ºæ„Ÿåˆ°å‹åŠ›ï¼‰
- åŒæ–¹éƒ½æ— æ³•å•æ–¹é¢æ”¹å˜ç­–ç•¥è€Œä¸æ„Ÿåˆ°æ›´ç³Ÿ
- ä½†è¿™å¹¶ä¸æ˜¯å…¨å±€æœ€ä¼˜çš„å‡è¡¡

### Core Objects æ˜ å°„
- `åœ¨ä¹çš„äºº` â†’ **Player with Strategy Space** (ç­–ç•¥ç©ºé—´å—é™çš„ç©å®¶)
- `è¢«åœ¨ä¹çš„å¯¹è±¡` â†’ **Player with Dominant Strategy** (æ‹¥æœ‰å ä¼˜ç­–ç•¥çš„ç©å®¶)
- `å¤±å»` â†’ **Suboptimal Equilibrium** (æ¬¡ä¼˜å‡è¡¡ç»“æœ)

### Core Morphisms æ˜ å°„
- `åœ¨ä¹â†’ç„¦è™‘` â†’ **Strategy Convergence** (ç­–ç•¥æ”¶æ•›åˆ°å•ä¸€é€‰é¡¹)
- `ç„¦è™‘â†’æ§åˆ¶` â†’ **Commitment Strategy** (æ‰¿è¯ºç­–ç•¥ï¼Œé™åˆ¶è‡ªå·±çš„é€‰æ‹©)
- `æ§åˆ¶â†’é€ƒç¦»` â†’ **Best Response** (å¯¹æ–¹çš„æœ€ä½³å›åº”æ˜¯é€€å‡º)

### æ–¹æ³•è®ºåº”ç”¨
**ä½¿ç”¨çš„æ–¹æ³•**: 
- æ–¹æ³• #12: "æ”¶ç›ŠçŸ©é˜µåˆ†æ"â€”â€”æ˜ç¡®åˆ—å‡ºåŒæ–¹çš„æ”¶ç›Šç»“æ„
- æ–¹æ³• #15: "å‡è¡¡ç²¾ç‚¼"â€”â€”å¯»æ‰¾æ›´ä¼˜çš„å‡è¡¡ç‚¹

**é¿å¼€çš„å‘**:
- å‘ #3: "å‡è®¾å¯¹æ–¹ç†æ€§"â€”â€”å®é™…ä¸Šå¯¹æ–¹å¯èƒ½å—æƒ…æ„Ÿé©±åŠ¨
- å‘ #7: "å¿½è§†é‡å¤åšå¼ˆ"â€”â€”å…³ç³»æ˜¯é•¿æœŸé‡å¤åšå¼ˆï¼Œä¸æ˜¯ä¸€æ¬¡æ€§åšå¼ˆ

### Case_Study å¼•ç”¨
**æ¥è‡ªé¢†åŸŸæ–‡ä»¶çš„æ¡ˆä¾‹**: 
> "å†·æˆ˜ä¸­çš„æ ¸å¨æ…‘åšå¼ˆï¼šåŒæ–¹éƒ½çŸ¥é“æˆ˜äº‰ä¼šå¯¼è‡´å…±åŒæ¯ç­ï¼ˆæ¬¡ä¼˜å‡è¡¡ï¼‰ï¼Œä½†éƒ½æ— æ³•å•æ–¹é¢è§£é™¤æ­¦è£…ã€‚ç›´åˆ°ä¸€æ–¹æ”¹å˜ç­–ç•¥ï¼ˆGorbachevçš„'æ–°æ€ç»´'ï¼‰ï¼Œæ‰æ‰“ç ´å‡è¡¡ã€‚"

**åº”ç”¨åˆ°æœ¬é—®é¢˜**: 
æ‰“ç ´"è¶Šåœ¨ä¹è¶Šå®¹æ˜“å¤±å»"çš„åå‡è¡¡ï¼Œéœ€è¦ä¸€æ–¹æ”¹å˜ç­–ç•¥ï¼šä»"è¿‡åº¦æŠ•å…¥"è½¬å‘"é€‚åº¦åœ¨ä¹+è‡ªæˆ‘ä»·å€¼å»ºè®¾"ã€‚

...
```

### éªŒè¯é¢†åŸŸæ–‡ä»¶è¯»å–

**ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯**ï¼š

```bash
# æ£€æŸ¥æˆ‘æ˜¯å¦è¯»å–äº†é¢†åŸŸæ–‡ä»¶
grep -n "references/.*_v2.md" ~/.morphism_mapper/explorations/latest/domain_results/*_round1.json

# æ£€æŸ¥æ˜¯å¦å¼•ç”¨äº†å®šç†
grep -n "Theorem" ~/.morphism_mapper/explorations/latest/domain_results/*_round1.json

# æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† Core Objects
grep -n "Core Object" ~/.morphism_mapper/explorations/latest/domain_results/*_round1.json
```

---

## åŠ¨æ€ Agent ç”Ÿæˆæœºåˆ¶

### æ ¸å¿ƒè„šæœ¬

```python
from scripts.dynamic_agent_generator import DynamicAgentGenerator

# åˆå§‹åŒ–
generator = DynamicAgentGenerator()

# æ‰¹é‡ç”Ÿæˆï¼ˆæ¨èï¼‰
prompts = generator.generate_batch(
    domains=['game_theory', 'evolutionary_biology'],
    category_skeleton={
        "objects": [...],
        "morphisms": [...],
        "æ ¸å¿ƒé—®é¢˜": "..."
    }
)

# å¯åŠ¨ Domain Agents
for domain, prompt in prompts.items():
    Task(
        name=f"{domain}-agent",
        prompt=prompt,  # å·²åŒ…å«å®Œæ•´é¢†åŸŸçŸ¥è¯† + èŒƒç•´éª¨æ¶
        ...
    )
```

### çŸ¥è¯†æ¥æº

1. **å†…ç½®é¢†åŸŸ**: `references/{domain}_v2.md` (31ä¸ª)
2. **è‡ªå®šä¹‰é¢†åŸŸ**: `references/custom/{domain}_v2.md`
3. **åŠ¨æ€åˆ›å»º**: å¦‚æœä¸å­˜åœ¨ï¼Œè‡ªåŠ¨ç”Ÿæˆ V2 æ ‡å‡†æ ¼å¼

### V2 æ ‡å‡†ç»“æ„

æ¯ä¸ªé¢†åŸŸæ–‡ä»¶åŒ…å«ï¼š
- **100åŸºæœ¬åŸºçŸ³**: å“²å­¦è§‚(18) + åŸåˆ™(22) + å¿ƒæ™ºæ¨¡å‹(28) + æ–¹æ³•è®º(22) + é¿å‘(10)
- **14 Core Objects**: é¢†åŸŸæ ¸å¿ƒæ¦‚å¿µ
- **14 Core Morphisms**: é¢†åŸŸåŠ¨æ€å…³ç³»
- **18 Theorems**: æ¯ä¸ªå« Applicable_Structure + Mapping_Hint + Case_Study

---

## æ‰§è¡Œæµç¨‹

```
Step 1: TeamCreate(team_name="xxx")
    â†“ è‡ªåŠ¨åˆ›å»º team-lead
Step 2: å¯åŠ¨æ ¸å¿ƒæˆå‘˜
    â”œâ”€â”€ Task("obstruction-theorist")
    â””â”€â”€ Task("synthesizer")
    â†“
Step 3: Team Lead æå– Category Skeleton
    â”œâ”€â”€ Objects: é—®é¢˜ä¸­çš„å®ä½“
    â””â”€â”€ Morphisms: å®ä½“é—´åŠ¨æ€å…³ç³»
    â†“
Step 4: é¢†åŸŸé€‰æ‹© (domain_selector.py)
    â”œâ”€â”€ åˆ†æ Morphisms æå–æ ‡ç­¾
    â”œâ”€â”€ åŒ¹é… 16 ä¸ªåŠ¨æ€æ ‡ç­¾
    â””â”€â”€ Tier Balance é€‰æ‹© Top 3-5
    â†“
Step 5: Team Lead åŠ¨æ€ç”Ÿæˆ Domain Agents

    ```python
    from scripts.dynamic_agent_generator import DynamicAgentGenerator
    from scripts.domain_selector import DomainSelector

    # 5.1 é¢†åŸŸé€‰æ‹©
    selector = DomainSelector()
    result = selector.select_domains(objects, morphisms)
    selected_domains = [d['domain'] for d in result['top_domains'][:3]]

    # 5.2 åˆå§‹åŒ–ç”Ÿæˆå™¨ï¼ˆå¯ç”¨è¡¥ç›²æ¨¡å¼ï¼‰
    generator = DynamicAgentGenerator()

    # 5.3 æ‰¹é‡ç”Ÿæˆ Promptsï¼ˆå…³é”®ï¼šauto_create=True å¯ç”¨è¡¥ç›²ï¼‰
    prompts = generator.generate_batch(
        domains=selected_domains,
        category_skeleton=category_skeleton,
        auto_create=True,  # âœ… å¯ç”¨è‡ªåŠ¨è¡¥ç›²
        domain_sources={
            'domain_name': 'é¢†åŸŸæè¿°ï¼ˆç”¨äºè¡¥ç›²ç”Ÿæˆï¼‰'
        }
    )

    # 5.4 å¤„ç†æ¯ä¸ªé¢†åŸŸ
    for domain, prompt_or_instruction in prompts.items():

        # æƒ…å†µA: æ­£å¸¸è¿”å›ï¼ˆå­—ç¬¦ä¸²ï¼‰
        if isinstance(prompt_or_instruction, str):
            Task(
                name=f"{domain}-agent",
                prompt=prompt_or_instruction,
                subagent_type="general-purpose",
                team_name=team_name
            )

        # æƒ…å†µB: éœ€è¦è¡¥ç›²ç”Ÿæˆï¼ˆå­—å…¸ï¼‰
        elif isinstance(prompt_or_instruction, dict):
            if prompt_or_instruction['action'] == 'CREATE_DOMAIN':
                # Team Lead è°ƒç”¨ LLM ç”Ÿæˆé¢†åŸŸçŸ¥è¯†
                generation_prompt = prompt_or_instruction['generation_prompt']

                # è°ƒç”¨ LLMï¼ˆå½“å‰ä¸Šä¸‹æ–‡ï¼‰
                content = generate_content(generation_prompt)  # Team Lead æ‰§è¡Œ

                # ä¿å­˜é¢†åŸŸæ–‡ä»¶
                file_path = generator.create_domain_from_content(domain, content)

                # é‡æ–°ç”Ÿæˆå®Œæ•´ Prompt
                full_prompt = generator.generate_full_prompt(domain, category_skeleton)

                # å¯åŠ¨ Domain Agent
                Task(
                    name=f"{domain}-agent",
                    prompt=full_prompt,
                    subagent_type="general-purpose",
                    team_name=team_name
                )
    ```

    **Team Lead å†³ç­–é€»è¾‘**ï¼š
    - æ£€æŸ¥è¿”å›ç±»å‹ï¼š`str` = æ­£å¸¸ï¼Œ`dict` = éœ€è¦è¡¥ç›²
    - å¦‚æœæ˜¯è¡¥ç›²ï¼šå¿…é¡»å…ˆç”Ÿæˆé¢†åŸŸæ–‡ä»¶ï¼Œå†å¯åŠ¨ Agent
    - è¡¥ç›²æ˜¯é˜»å¡æ­¥éª¤ï¼Œå®Œæˆåæ‰èƒ½ç»§ç»­
    â†“
Step 6: Domain Agents å¹¶è¡Œåˆ†æ
    â”œâ”€â”€ é¢†åŸŸçŸ¥è¯†æ˜ å°„
    â”œâ”€â”€ SendMessage â†’ Obstruction (å®Œæ•´)
    â””â”€â”€ SendMessage â†’ Synthesizer (æ´å¯Ÿ)
    â†“
Step 7: ä¸‰äººå°ç»„å†³ç­–ä¼šè®®
    â”œâ”€â”€ Synthesizer: æŠ¥å‘Š Limits/Colimits
    â”œâ”€â”€ Obstruction: æŠ¥å‘Šé€šè¿‡ç‡/é£é™©
    â””â”€â”€ Team Lead: å†³ç­–è¿­ä»£ or ç»ˆæ­¢
    â†“
Step 8: ç”ŸæˆæŠ¥å‘Š & çŸ¥è¯†åº“æ›´æ–°
    â”œâ”€â”€ ä¿å­˜åˆ° knowledge/exploration_history/
    â””â”€â”€ æ›´æ–° knowledge/homography_graph.json
```

---

## ğŸ—„ï¸ å¼ºåˆ¶æŒä¹…åŒ–æµç¨‹è¦æ±‚ (v4.5+)

**æ ¸å¿ƒåŸåˆ™**: æ‰€æœ‰Agentçš„è¾“å‡ºå¿…é¡»æŒä¹…åŒ–åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œç¡®ä¿åç»­è½®æ¬¡å¯ä»¥è¯»å–å†å²è¾“å‡ºè¿›è¡Œé’ˆå¯¹æ€§ä¿®æ­£ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦å¼ºåˆ¶æŒä¹…åŒ–

åœ¨Swarm Modeå¤šè½®è¿­ä»£ä¸­ï¼ŒåŒä¸€ä¸ªDomain Agentåœ¨ç¬¬äºŒè½®éœ€è¦è¯»å–è‡ªå·±ç¬¬ä¸€è½®çš„å®Œæ•´è¾“å‡ºï¼š
- âŒ **æ— æŒä¹…åŒ–**: æ¯æ¬¡Taskåˆ›å»ºæ–°Agentå®ä¾‹ï¼Œå†å²è¾“å‡ºä¸¢å¤±
- âœ… **æœ‰æŒä¹…åŒ–**: Agentè¯»å–è‡ªå·±çš„å†å²æ–‡ä»¶ï¼ŒåŸºäºå®Œæ•´ä¸Šä¸‹æ–‡ä¿®æ­£

### æŒä¹…åŒ–æ¶æ„ (v4.5+ ç»Ÿä¸€é—®é¢˜å­ç›®å½•)

**æ ¸å¿ƒå˜æ›´**: æ‰€æœ‰æ¢ç´¢æŒ‰é—®é¢˜ç»´åº¦ç»„ç»‡ï¼Œæ¯ä¸ªé—®é¢˜æ‹¥æœ‰ç‹¬ç«‹çš„å­ç›®å½•ï¼Œé¿å…æ–‡ä»¶æ··ä¹±ã€‚

```
~/.morphism_mapper/explorations/                    # ç»Ÿä¸€æ ¹ç›®å½•
â”œâ”€â”€ {timestamp}_{problem_slug}/                     # æ¯ä¸ªé—®é¢˜ç‹¬ç«‹å­ç›®å½•
â”‚   â”œâ”€â”€ metadata.json                               # é—®é¢˜å…ƒæ•°æ®
â”‚   â”œâ”€â”€ domain_results/                             # Domain Agentè¾“å‡º
â”‚   â”‚   â”œâ”€â”€ {domain}_round1.json
â”‚   â”‚   â””â”€â”€ {domain}_round2.json
â”‚   â”œâ”€â”€ obstruction_feedbacks/                      # Obstructionå®¡æŸ¥åé¦ˆ
â”‚   â”‚   â””â”€â”€ {domain}_obstruction.json
â”‚   â”œâ”€â”€ synthesizer_inputs/                         # Synthesizeræ•´åˆè¾“å…¥
â”‚   â”‚   â””â”€â”€ synthesis_input.json
â”‚   â”œâ”€â”€ final_reports/                              # æœ€ç»ˆæŠ¥å‘Š
â”‚   â”‚   â””â”€â”€ synthesis.json
â”‚   â””â”€â”€ logs/                                       # æ‰§è¡Œæ—¥å¿—
â”œâ”€â”€ index.json                                      # æ‰€æœ‰æ¢ç´¢çš„ç´¢å¼•
â””â”€â”€ latest -> {timestamp}_{problem_slug}/           # è½¯é“¾æ¥åˆ°æœ€æ–°æ¢ç´¢
```

### æ–‡ä»¶è·¯å¾„è§„èŒƒ

```python
import os
from datetime import datetime

# ç»Ÿä¸€æ ¹ç›®å½•
BASE_PATH = os.path.expanduser("~/.morphism_mapper/explorations")

# ç”Ÿæˆé—®é¢˜å­ç›®å½•å (Team Leadåœ¨å¯åŠ¨æ—¶åˆ›å»º)
def create_exploration_dir(problem: str) -> str:
    """
    åˆ›å»ºé—®é¢˜æ¢ç´¢å­ç›®å½•
    Returns: æ¢ç´¢ç›®å½•è·¯å¾„
    """
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    problem_slug = problem[:30].replace(" ", "_").replace("/", "_")
    exploration_id = f"{timestamp}_{problem_slug}"
    exploration_path = os.path.join(BASE_PATH, exploration_id)
    
    # åˆ›å»ºç›®å½•ç»“æ„
    os.makedirs(exploration_path, exist_ok=True)
    for subdir in ["domain_results", "obstruction_feedbacks", "synthesizer_inputs", "final_reports", "logs"]:
        os.makedirs(os.path.join(exploration_path, subdir), exist_ok=True)
    
    # åˆ›å»ºå…ƒæ•°æ®æ–‡ä»¶
    metadata = {
        "exploration_id": exploration_id,
        "problem": problem,
        "timestamp": timestamp,
        "status": "initiated"
    }
    with open(os.path.join(exploration_path, "metadata.json"), "w") as f:
        json.dump(metadata, f, indent=2)
    
    # æ›´æ–°æœ€æ–°è½¯é“¾æ¥
    latest_link = os.path.join(BASE_PATH, "latest")
    if os.path.islink(latest_link):
        os.unlink(latest_link)
    os.symlink(exploration_path, latest_link)
    
    return exploration_path

# å½“å‰æ¢ç´¢è·¯å¾„ (ç”±Team Leadæ³¨å…¥åˆ°æ‰€æœ‰Agentçš„ä¸Šä¸‹æ–‡ä¸­)
EXPLORATION_PATH = os.environ.get("MORPHISM_EXPLORATION_PATH", os.path.join(BASE_PATH, "latest"))

# Domain Agentç¬¬ä¸€è½®
DOMAIN_ROUND1 = f"{EXPLORATION_PATH}/domain_results/{domain}_round1.json"

# Domain Agentç¬¬äºŒè½®ï¼ˆä¿®æ­£åï¼‰
DOMAIN_ROUND2 = f"{EXPLORATION_PATH}/domain_results/{domain}_round2.json"

# Obstructionåé¦ˆ
OBSTRUCTION_FEEDBACK = f"{EXPLORATION_PATH}/obstruction_feedbacks/{domain}_obstruction.json"

# Synthesizerè¾“å…¥
SYNTHESIS_INPUT = f"{EXPLORATION_PATH}/synthesizer_inputs/synthesis_input.json"

# æœ€ç»ˆæŠ¥å‘Š
FINAL_REPORT = f"{EXPLORATION_PATH}/final_reports/synthesis.json"
```

### Team Lead æŒä¹…åŒ–åˆå§‹åŒ–èŒè´£

**Step 0: åˆ›å»ºæ¢ç´¢ç›®å½•** (åœ¨Step 1ä¹‹å‰æ‰§è¡Œ)

```python
# Team Lead åœ¨å¯åŠ¨æ—¶åˆ›å»ºç»Ÿä¸€çš„é—®é¢˜å­ç›®å½•
exploration_path = create_exploration_dir(problem="äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿")

# å°†è·¯å¾„æ³¨å…¥åˆ°æ‰€æœ‰åç»­Agentçš„ç¯å¢ƒå˜é‡
os.environ["MORPHISM_EXPLORATION_PATH"] = exploration_path

# åœ¨å¯åŠ¨æ¯ä¸ªAgentæ—¶ï¼Œåœ¨promptä¸­æ˜ç¡®å‘ŠçŸ¥å­˜å‚¨è·¯å¾„
agent_prompt = f"""
...å…¶ä»–promptå†…å®¹...

## ğŸ—„ï¸ å¼ºåˆ¶æŒä¹…åŒ–è·¯å¾„
å½“å‰æ¢ç´¢ç›®å½•: {exploration_path}
ä½ å¿…é¡»å°†æ‰€æœ‰è¾“å‡ºä¿å­˜åˆ°æ­¤ç›®å½•ä¸‹çš„å¯¹åº”å­ç›®å½•ä¸­ã€‚

### ä¿å­˜è·¯å¾„è§„èŒƒ:
- Domainç»“æœ: {exploration_path}/domain_results/{{domain}}_round{{N}}.json
- Obstructionåé¦ˆ: {exploration_path}/obstruction_feedbacks/{{domain}}_obstruction.json
- Synthesizerè¾“å…¥: {exploration_path}/synthesizer_inputs/synthesis_input.json
- æœ€ç»ˆæŠ¥å‘Š: {exploration_path}/final_reports/synthesis.json
- æ‰§è¡Œæ—¥å¿—: {exploration_path}/logs/
"""
```

---

## âš¡ æŒä¹…åŒ–å¼ºåˆ¶æ‰§è¡Œä¸æƒé™ç®¡ç† (v4.5.2+)

**æ ¸å¿ƒåŸåˆ™**: æŒä¹…åŒ–ä¸å†æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯å¼ºåˆ¶è¦æ±‚ã€‚ä»»ä½• Agent åœ¨æ‰§è¡Œåˆ†æå‰å¿…é¡»ç¡®è®¤å…·å¤‡å†™å…¥æƒé™ï¼Œå¦åˆ™å¿…é¡»å‘ç”¨æˆ·ç”³è¯·ã€‚

### ğŸš¨ å¼ºåˆ¶æ‰§è¡Œè§„åˆ™

#### è§„åˆ™ 1: å†™å…¥æƒé™å‰ç½®æ£€æŸ¥

**åœ¨å¯åŠ¨ä»»ä½•åˆ†æä¹‹å‰ï¼ŒTeam Lead å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥**:

```python
import os

def check_persistence_prerequisites():
    """
    æ£€æŸ¥æŒä¹…åŒ–å‰ææ¡ä»¶
    Returns: (bool, str) - (æ˜¯å¦é€šè¿‡, é”™è¯¯ä¿¡æ¯)
    """
    base_path = os.path.expanduser("~/.morphism_mapper")
    
    # 1. æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨æˆ–å¯åˆ›å»º
    try:
        os.makedirs(base_path, exist_ok=True)
    except PermissionError:
        return False, f"âŒ æ— æ³•åˆ›å»ºç›®å½• {base_path}ï¼šæƒé™è¢«æ‹’ç»"
    except Exception as e:
        return False, f"âŒ æ— æ³•åˆ›å»ºç›®å½• {base_path}ï¼š{str(e)}"
    
    # 2. æ£€æŸ¥å†™å…¥æƒé™
    test_file = os.path.join(base_path, ".write_test")
    try:
        with open(test_file, 'w') as f:
            f.write("test")
        os.remove(test_file)
    except PermissionError:
        return False, f"âŒ æ²¡æœ‰å†™å…¥æƒé™ï¼š{base_path}"
    except Exception as e:
        return False, f"âŒ å†™å…¥æµ‹è¯•å¤±è´¥ï¼š{str(e)}"
    
    return True, "âœ… æŒä¹…åŒ–æƒé™æ£€æŸ¥é€šè¿‡"

# åœ¨ Step 0 æ‰§è¡Œ
passed, message = check_persistence_prerequisites()
if not passed:
    # å¿…é¡»å‘ç”¨æˆ·ç”³è¯·æƒé™ï¼Œä¸èƒ½ç»§ç»­
    request_user_permission(message)
```

#### è§„åˆ™ 2: æŒ‰éœ€ç”³è¯·å†™å…¥æƒé™

**å¦‚æœæƒé™æ£€æŸ¥å¤±è´¥ï¼Œå¿…é¡»åœæ­¢åˆ†æå¹¶å‘ç”¨æˆ·ç”³è¯·æƒé™**:

```markdown
âš ï¸ **æƒé™ç”³è¯·é€šçŸ¥**

Morphism Mapper éœ€è¦å†™å…¥æƒé™ä»¥ä¿å­˜åˆ†æç»“æœã€‚è¿™æ˜¯ v4.5+ çš„å¼ºåˆ¶è¦æ±‚ã€‚

**éœ€è¦è®¿é—®çš„ç›®å½•**:
- `~/.morphism_mapper/explorations/` - ä¿å­˜æ‰€æœ‰æ¢ç´¢è®°å½•
- `~/.morphism_mapper/explorations/index.json` - æ¢ç´¢ç´¢å¼•

**ä¸ºä»€ä¹ˆéœ€è¦å†™å…¥æƒé™**:
1. **å¤šè½®è¿­ä»£ä¾èµ–**: Round 2 éœ€è¦è¯»å– Round 1 çš„ç»“æœ
2. **å†å²è¿½è¸ª**: æ”¯æŒå›é¡¾å’Œå¯¹æ¯”å¤šæ¬¡åˆ†æ
3. **è´¨é‡ä¿è¯**: Obstruction Theorist éœ€è¦å®¡æŸ¥å†å²è¾“å‡º
4. **å®¡è®¡åˆè§„**: æ‰€æœ‰åˆ†æè¿‡ç¨‹å¯è¿½æº¯

**å¯é€‰æ–¹æ¡ˆ**:
- **æ–¹æ¡ˆ A**: æˆäºˆ `~/.morphism_mapper/` ç›®å½•çš„å†™å…¥æƒé™ï¼ˆæ¨èï¼‰
- **æ–¹æ¡ˆ B**: æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„ï¼Œéœ€æä¾›è¯¥è·¯å¾„çš„å†™å…¥æƒé™
- **æ–¹æ¡ˆ C**: ä½¿ç”¨ä¸´æ—¶æ¨¡å¼ï¼ˆä¸æ¨èï¼ŒåŠŸèƒ½å—é™ï¼Œæ— æ³•å¤šè½®è¿­ä»£ï¼‰

è¯·æˆæƒæˆ–é€‰æ‹©æ–¹æ¡ˆï¼Œåˆ†æå°†åœ¨è·å¾—æƒé™åç»§ç»­ã€‚
```

#### è§„åˆ™ 3: æƒé™ç”³è¯·åçš„ç¡®è®¤æµç¨‹

**ç”¨æˆ·æˆæƒåï¼Œå¿…é¡»é‡æ–°éªŒè¯**:

```python
def request_user_permission(error_message: str) -> bool:
    """
    å‘ç”¨æˆ·ç”³è¯·å†™å…¥æƒé™
    Returns: bool - æ˜¯å¦è·å¾—æˆæƒå¹¶éªŒè¯é€šè¿‡
    """
    # å‘ç”¨æˆ·æ˜¾ç¤ºæƒé™ç”³è¯·é€šçŸ¥ï¼ˆè§ä¸Šæ–‡æ¨¡æ¿ï¼‰
    # ç­‰å¾…ç”¨æˆ·å“åº”...
    
    # ç”¨æˆ·æˆæƒåï¼Œå†æ¬¡éªŒè¯
    passed, verify_message = check_persistence_prerequisites()
    
    if passed:
        print("âœ… æƒé™å·²ç¡®è®¤ï¼Œç»§ç»­åˆ†ææµç¨‹")
        return True
    else:
        print(f"âŒ æƒé™éªŒè¯ä»å¤±è´¥ï¼š{verify_message}")
        print("è¯·æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæƒé™æˆ–é€‰æ‹©å¤‡ç”¨æ–¹æ¡ˆ")
        return False
```

#### è§„åˆ™ 4: ä¸´æ—¶æ¨¡å¼é™çº§ï¼ˆä»…åº”æ€¥ï¼‰

**å¦‚æœç”¨æˆ·æ‹’ç»æˆæƒï¼Œå¯ä»¥è¿›å…¥ä¸´æ—¶æ¨¡å¼ï¼Œä½†åŠŸèƒ½å—é™**:

```python
class PersistenceMode:
    FULL = "full"           # å®Œæ•´æŒä¹…åŒ–ï¼ˆæ¨èï¼‰
    TEMPORARY = "temporary" # ä¸´æ—¶æ¨¡å¼ï¼ˆåŠŸèƒ½å—é™ï¼‰
    MEMORY_ONLY = "memory"  # ä»…å†…å­˜ï¼ˆå•è½®ï¼Œä¸æ¨èï¼‰

def set_persistence_mode(mode: PersistenceMode):
    """
    è®¾ç½®æŒä¹…åŒ–æ¨¡å¼
    """
    if mode == PersistenceMode.FULL:
        os.environ["MORPHISM_PERSISTENCE_MODE"] = "full"
        os.environ["MORPHISM_EXPLORATION_PATH"] = create_exploration_dir(problem)
    elif mode == PersistenceMode.TEMPORARY:
        os.environ["MORPHISM_PERSISTENCE_MODE"] = "temporary"
        # ä½¿ç”¨ /tmpï¼Œä½†ç”¨æˆ·ä¼šè¢«è­¦å‘Š
        temp_path = f"/tmp/morphism_mapper_{timestamp}"
        os.environ["MORPHISM_EXPLORATION_PATH"] = temp_path
        print("âš ï¸ è­¦å‘Šï¼šä½¿ç”¨ä¸´æ—¶æ¨¡å¼ï¼Œåˆ†æç»“æœå°†åœ¨ä¼šè¯ç»“æŸåä¸¢å¤±")
        print("âš ï¸ é™åˆ¶ï¼šæ— æ³•æ‰§è¡Œå¤šè½®è¿­ä»£ï¼ˆRound 2 éœ€è¦ Round 1 çš„å†å²æ–‡ä»¶ï¼‰")
    elif mode == PersistenceMode.MEMORY_ONLY:
        os.environ["MORPHISM_PERSISTENCE_MODE"] = "memory"
        print("ğŸš¨ è­¦å‘Šï¼šä½¿ç”¨å†…å­˜æ¨¡å¼ï¼Œä»…é™å•è½®åˆ†æ")
        print("ğŸš¨ Obstruction Theorist å°†æ— æ³•å®¡æŸ¥å†å²è¾“å‡º")

# åœ¨æƒé™ç”³è¯·å¤±è´¥å
if not request_user_permission(error_msg):
    print("\né€‰æ‹©æŒä¹…åŒ–æ¨¡å¼ï¼š")
    print("1. ä¸´æ—¶æ¨¡å¼ï¼ˆ/tmpï¼Œä¼šè¯ç»“æŸåä¸¢å¤±ï¼‰")
    print("2. å†…å­˜æ¨¡å¼ï¼ˆä»…é™å•è½®åˆ†æï¼‰")
    print("3. é€€å‡ºå¹¶æ‰‹åŠ¨ä¿®å¤æƒé™")
    # ç­‰å¾…ç”¨æˆ·é€‰æ‹©...
```

### ğŸ“‹ æƒé™æ£€æŸ¥æ¸…å•

**Team Lead å¿…é¡»åœ¨åˆ†æå¼€å§‹å‰ç¡®è®¤**:

- [ ] **ç›®å½•æƒé™**: `~/.morphism_mapper/` ç›®å½•å¯åˆ›å»º/å¯å†™å…¥
- [ ] **å­ç›®å½•æƒé™**: `explorations/`ã€`domain_results/` ç­‰å­ç›®å½•å¯åˆ›å»º
- [ ] **æ–‡ä»¶æƒé™**: å¯ä»¥åˆ›å»ºå’Œä¿®æ”¹ `.json` æ–‡ä»¶
- [ ] **ç´¢å¼•æ›´æ–°**: å¯ä»¥æ›´æ–° `index.json` ç´¢å¼•æ–‡ä»¶
- [ ] **è½¯é“¾æ¥**: å¯ä»¥åˆ›å»º/æ›´æ–° `latest` è½¯é“¾æ¥ï¼ˆé Windowsï¼‰

### ğŸ”’ æƒé™æœ€ä½³å®è·µ

#### 1. é¢„æ£€è„šæœ¬

**å»ºè®®ç”¨æˆ·åœ¨é¦–æ¬¡ä½¿ç”¨å‰è¿è¡Œé¢„æ£€**:

```bash
#!/bin/bash
# persistence_check.sh

echo "ğŸ” æ£€æŸ¥ Morphism Mapper æŒä¹…åŒ–æƒé™..."

BASE_DIR="$HOME/.morphism_mapper"

# æ£€æŸ¥ç›®å½•åˆ›å»º
if mkdir -p "$BASE_DIR/test" 2>/dev/null; then
    echo "âœ… ç›®å½•åˆ›å»ºæƒé™æ­£å¸¸"
    rm -rf "$BASE_DIR/test"
else
    echo "âŒ æ— æ³•åˆ›å»ºç›®å½• $BASE_DIR"
    echo "è¯·æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæƒé™ï¼š"
    echo "  ls -la $HOME/ | grep morphism"
    exit 1
fi

# æ£€æŸ¥æ–‡ä»¶å†™å…¥
if echo "test" > "$BASE_DIR/write_test" 2>/dev/null; then
    echo "âœ… æ–‡ä»¶å†™å…¥æƒé™æ­£å¸¸"
    rm "$BASE_DIR/write_test"
else
    echo "âŒ æ— æ³•å†™å…¥æ–‡ä»¶"
    exit 1
fi

echo "ğŸ‰ æ‰€æœ‰æƒé™æ£€æŸ¥é€šè¿‡ï¼"
```

#### 2. è‡ªå®šä¹‰è·¯å¾„æ”¯æŒ

**å…è®¸ç”¨æˆ·æŒ‡å®šè‡ªå®šä¹‰æŒä¹…åŒ–è·¯å¾„**:

```python
def create_exploration_dir_custom(problem: str, custom_base: str = None) -> str:
    """
    åˆ›å»ºæ¢ç´¢ç›®å½•ï¼ˆæ”¯æŒè‡ªå®šä¹‰åŸºç¡€è·¯å¾„ï¼‰
    """
    if custom_base:
        base_path = os.path.expanduser(custom_base)
        # éªŒè¯è‡ªå®šä¹‰è·¯å¾„çš„æƒé™
        if not os.access(base_path, os.W_OK):
            raise PermissionError(f"æ²¡æœ‰å†™å…¥æƒé™ï¼š{base_path}")
    else:
        base_path = os.path.expanduser("~/.morphism_mapper/explorations")
    
    # ç»§ç»­åˆ›å»ºå­ç›®å½•...
```

#### 3. å¤±è´¥æ¢å¤æœºåˆ¶

**å¦‚æœå†™å…¥è¿‡ç¨‹ä¸­å¤±è´¥ï¼Œå¿…é¡»ä¼˜é›…é™çº§**:

```python
def safe_write_file(filepath: str, content: str, max_retries: int = 3):
    """
    å®‰å…¨å†™å…¥æ–‡ä»¶ï¼Œå¤±è´¥æ—¶æä¾›æ¢å¤é€‰é¡¹
    """
    for attempt in range(max_retries):
        try:
            # ç¡®ä¿ç›®å½•å­˜åœ¨
            os.makedirs(os.path.dirname(filepath), exist_ok=True)
            
            # å†™å…¥æ–‡ä»¶
            with open(filepath, 'w', encoding='utf-8') as f:
                f.write(content)
            
            print(f"âœ… å·²ä¿å­˜: {filepath}")
            return True
            
        except PermissionError as e:
            print(f"âŒ å†™å…¥å¤±è´¥ (å°è¯• {attempt + 1}/{max_retries}): {e}")
            if attempt == max_retries - 1:
                # æœ€ç»ˆå¤±è´¥ï¼Œæä¾›å¤‡é€‰æ–¹æ¡ˆ
                print("\nâš ï¸ æ— æ³•æŒä¹…åŒ–ï¼Œå¤‡é€‰æ–¹æ¡ˆï¼š")
                print(f"1. æ‰‹åŠ¨åˆ›å»ºç›®å½•: mkdir -p {os.path.dirname(filepath)}")
                print(f"2. æ›´æ”¹è·¯å¾„æƒé™: chmod 755 {os.path.dirname(filepath)}")
                print(f"3. ä½¿ç”¨å†…å­˜æ¨¡å¼ç»§ç»­ï¼ˆåŠŸèƒ½å—é™ï¼‰")
                return False
        except Exception as e:
            print(f"âŒ æ„å¤–é”™è¯¯: {e}")
            return False
```

### ğŸš« ç¦æ­¢è¡Œä¸º

ä»¥ä¸‹è¡Œä¸ºåœ¨ v4.5.2+ ä¸­è¢«è§†ä¸ºä¸¥é‡è¿è§„ï¼š

| è¿è§„è¡Œä¸º | é£é™©ç­‰çº§ | åæœ |
|---------|---------|------|
| **è·³è¿‡æƒé™æ£€æŸ¥ç›´æ¥åˆ†æ** | ğŸ”´ Critical | å¯èƒ½å¯¼è‡´ Round 2 æ— æ³•è¯»å– Round 1 ç»“æœ |
| **åœ¨å†…å­˜ä¸­ç¼“å­˜è€Œä¸å†™å…¥** | ğŸ”´ Critical | è¿›ç¨‹é‡å¯åæ‰€æœ‰åˆ†æä¸¢å¤± |
| **ç”¨æˆ·æ‹’ç»æˆæƒåä»å¼ºåˆ¶ç»§ç»­** | ğŸŸ¡ High | ç”¨æˆ·ä½“éªŒå·®ï¼Œåˆ†æè´¨é‡æ— æ³•ä¿è¯ |
| **ä½¿ç”¨ `/tmp` è€Œä¸å‘ŠçŸ¥ç”¨æˆ·** | ğŸŸ¡ High | ä¸´æ—¶æ–‡ä»¶å¯èƒ½è¢«æ¸…ç†ï¼Œç”¨æˆ·ä¸çŸ¥æƒ… |
| **å†™å…¥å¤±è´¥æ—¶é™é»˜å¿½ç•¥** | ğŸ”´ Critical | ç”¨æˆ·è¯¯ä»¥ä¸ºå·²ä¿å­˜ï¼Œå®é™…æœªæŒä¹…åŒ– |

### âœ… åˆè§„æ£€æŸ¥ç¤ºä¾‹

**åˆè§„çš„æ‰§è¡Œæµç¨‹**:

```python
def run_morphism_analysis(problem: str):
    """
    åˆè§„çš„ Morphism Mapper æ‰§è¡Œæµç¨‹
    """
    
    # 1. æƒé™é¢„æ£€
    print("ğŸ” Step 0: æ£€æŸ¥æŒä¹…åŒ–æƒé™...")
    passed, message = check_persistence_prerequisites()
    
    if not passed:
        print(f"\n{message}")
        # å¿…é¡»ç”³è¯·æƒé™
        if not request_user_permission(message):
            print("\nâŒ æ— æ³•è·å¾—æŒä¹…åŒ–æƒé™ï¼Œåˆ†æç»ˆæ­¢")
            print("å»ºè®®ï¼š")
            print("  1. æ‰‹åŠ¨åˆ›å»ºç›®å½•: mkdir -p ~/.morphism_mapper")
            print("  2. æ£€æŸ¥ç£ç›˜ç©ºé—´: df -h")
            print("  3. æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæƒé™")
            return None
    
    # 2. åˆ›å»ºæ¢ç´¢ç›®å½•
    print("\nğŸ“ Step 0.1: åˆ›å»ºæ¢ç´¢ç›®å½•...")
    exploration_path = create_exploration_dir(problem)
    print(f"   æ¢ç´¢è·¯å¾„: {exploration_path}")
    
    # 3. ç¡®è®¤å†™å…¥æˆåŠŸ
    test_file = os.path.join(exploration_path, ".persistence_verified")
    try:
        with open(test_file, 'w') as f:
            f.write("verified")
        os.remove(test_file)
        print("   âœ… æŒä¹…åŒ–éªŒè¯é€šè¿‡")
    except Exception as e:
        print(f"   âŒ æŒä¹…åŒ–éªŒè¯å¤±è´¥: {e}")
        return None
    
    # 4. ç»§ç»­æ ‡å‡†åˆ†ææµç¨‹...
    print("\nğŸš€ å¼€å§‹åˆ†ææµç¨‹...")
    # ... TeamCreate, Agent å¯åŠ¨ç­‰
```

---

### å†å²æ¢ç´¢ç´¢å¼•

æ‰€æœ‰æ¢ç´¢è‡ªåŠ¨è®°å½•åœ¨ `~/.morphism_mapper/explorations/index.json`ï¼š

```json
{
  "explorations": [
    {
      "id": "20260210_143052_äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿",
      "problem": "äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿",
      "timestamp": "2026-02-10T14:30:52",
      "domains": ["evolutionary_biology", "information_theory", "neuroscience"],
      "status": "completed",
      "path": "~/.morphism_mapper/explorations/20260210_143052_äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿"
    }
  ],
  "total_count": 1,
  "latest": "20260210_143052_äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿"
}
```
```

### å„Agentçš„æŒä¹…åŒ–è´£ä»»

#### 1. Domain Agent (ROUND 1)

**è¾“å‡ºè¦æ±‚**:
```yaml
# MAPPING_RESULT_ROUND1å¿…é¡»åŒ…å«ï¼š
domain: "domain_name"
timestamp: "ISO 8601æ ¼å¼"
round: 1
problem: "åŸå§‹é—®é¢˜"
category_skeleton:
  objects: [...]
  morphisms: [...]
concept_mapping: {...}
insights: [...]
verification_proof: {...}
confidence_assessment: {...}
```

**ä¿å­˜æŒ‡ä»¤**ï¼ˆAgentå¿…é¡»åœ¨è¾“å‡ºæœ«å°¾åŒ…å«ï¼‰:
```
===SAVE_TO_FILE===
filepath: ${MORPHISM_EXPLORATION_PATH}/domain_results/{domain}_round1.json
content: <å®Œæ•´JSONå†…å®¹>
```

**Team Leadæ³¨å…¥çš„ç¯å¢ƒå˜é‡**: æ¯ä¸ªAgentå¯åŠ¨æ—¶ï¼ŒTeam Leadä¼šå°† `${MORPHISM_EXPLORATION_PATH}` æ³¨å…¥åˆ°Agentä¸Šä¸‹æ–‡ä¸­ã€‚

#### 2. Obstruction Theorist

**è¾“å…¥**: è¯»å– `${MORPHISM_EXPLORATION_PATH}/domain_results/{domain}_round1.json`

**é‡è¦**: Team Leadä¼šå°†å½“å‰æ¢ç´¢è·¯å¾„é€šè¿‡ç¯å¢ƒå˜é‡ `${MORPHISM_EXPLORATION_PATH}` æ³¨å…¥åˆ°ä½ çš„ä¸Šä¸‹æ–‡ä¸­ã€‚åŠ¡å¿…ä½¿ç”¨æ­¤å˜é‡æ„å»ºæ–‡ä»¶è·¯å¾„ã€‚

**è¾“å‡ºè¦æ±‚**:
```json
{
  "obstruction_id": "{domain}_round1",
  "theorist": "obstruction-theorist",
  "agent_target": "{domain}",
  "attack_matrix": {
    "dimension_i": {...},
    "dimension_ii": {...},
    "dimension_iii": {...}
  },
  "feedback": {
    "status": "REQUIRES_REVISION | PASS",
    "critical_issues": [...],
    "revision_requirements": [...]
  },
  "diagnosis": "30å­—é£é™©é¢„è­¦",
  "risk_tags": [...]
}
```

**ä¿å­˜æŒ‡ä»¤**:
```
===SAVE_TO_FILE===
filepath: ${MORPHISM_EXPLORATION_PATH}/obstruction_feedbacks/{domain}_obstruction.json
```

**æ³¨æ„**: ä½¿ç”¨ `${MORPHISM_EXPLORATION_PATH}` ç¯å¢ƒå˜é‡ï¼Œç”±Team Leadæ³¨å…¥ã€‚

#### 3. Domain Agent (ROUND 2)

**è¾“å…¥**ï¼ˆå¿…é¡»è¯»å–ï¼‰:
1. è‡ªå·±çš„ç¬¬ä¸€è½®è¾“å‡º: `${MORPHISM_EXPLORATION_PATH}/domain_results/{domain}_round1.json`
2. Obstructionåé¦ˆ: `${MORPHISM_EXPLORATION_PATH}/obstruction_feedbacks/{domain}_obstruction.json`

**é‡è¦**: ä½¿ç”¨ `${MORPHISM_EXPLORATION_PATH}` ç¯å¢ƒå˜é‡æ„å»ºè·¯å¾„ï¼Œç”±Team Leadåœ¨å¯åŠ¨æ—¶æ³¨å…¥ã€‚

**ä¿®æ­£è¦æ±‚**:
```yaml
# MAPPING_RESULT_ROUND2å¿…é¡»åŒ…å«ï¼š
revision_note: "åŸºäºobstructionåé¦ˆçš„ä¿®æ­£"
revision_focus: ["é—®é¢˜1", "é—®é¢˜2", "é—®é¢˜3"]  # å¯¹åº”ä¸‰å¤§æ”»å‡»ç‚¹

# å¿…é¡»å›åº”çš„å­—æ®µ
obstruction_response: |
  é’ˆå¯¹æ€§å›åº”å®¡æŸ¥æ„è§ï¼š
  1. é—®é¢˜1ï¼šä¿®æ­£å†…å®¹...
  2. é—®é¢˜2ï¼šä¿®æ­£å†…å®¹...
  3. é—®é¢˜3ï¼šä¿®æ­£å†…å®¹...

# æ–°å¢/ä¿®æ­£çš„æ´å¯Ÿï¼ˆå¸¦è¾¹ç•Œå£°æ˜ï¼‰
insights:
  - theorem: "å®šç†åç§°"
    insight: "ä¿®æ­£åçš„æ´å¯Ÿ"
    limitation: "ã€æ–°å¢ã€‘æœ¬æ˜ å°„çš„é€‚ç”¨è¾¹ç•Œï¼š..."
    correction: "ã€ä¿®æ­£ã€‘æ ¹æ®obstructionåé¦ˆï¼š..."
```

**ä¿å­˜æŒ‡ä»¤**:
```
===SAVE_TO_FILE===
filepath: ${MORPHISM_EXPLORATION_PATH}/domain_results/{domain}_round2.json
```

**æ³¨æ„**: ä½¿ç”¨ `${MORPHISM_EXPLORATION_PATH}` ç¯å¢ƒå˜é‡ã€‚

#### 4. Synthesizer

**è¾“å…¥**ï¼ˆè¯»å–æ‰€æœ‰ROUND2ç»“æœï¼‰:
```python
import os

# ä»ç¯å¢ƒå˜é‡è·å–å½“å‰æ¢ç´¢è·¯å¾„
EXPLORATION_PATH = os.environ.get("MORPHISM_EXPLORATION_PATH")

for domain in selected_domains:
    round2_file = f"{EXPLORATION_PATH}/domain_results/{domain}_round2.json"
    # è¯»å–å¹¶æ•´åˆ
```

**é‡è¦**: `${MORPHISM_EXPLORATION_PATH}` ç”±Team Leadæ³¨å…¥ã€‚

**è¾“å‡ºè¦æ±‚**:
```json
{
  "synthesis_metadata": {
    "domains_integrated": [...],
    "rounds": ["{domain}_round2", ...],
    "obstruction_feedback_integrated": true
  },
  "limits": [...],      // è·¨åŸŸå…±è¯†
  "colimits": [...],    // äº’è¡¥æ•´åˆ
  "final_answer": "...",
  "solution_recommendations": [...],
  "uncertainty_acknowledgment": "...",
  "validation_checklist": [...]
}
```

**ä¿å­˜æŒ‡ä»¤**:
```
===SAVE_TO_FILE===
filepath: ${MORPHISM_EXPLORATION_PATH}/final_reports/synthesis.json
```

**æ³¨æ„**: ä½¿ç”¨ `${MORPHISM_EXPLORATION_PATH}` ç¯å¢ƒå˜é‡ï¼Œæœ€ç»ˆæŠ¥å‘Šä¿å­˜åœ¨å½“å‰æ¢ç´¢ç›®å½•ä¸­ã€‚

### å®Œæ•´æµç¨‹ç¤ºä¾‹ï¼ˆå¸¦æŒä¹…åŒ–ï¼‰

```python
import os
from datetime import datetime

# Step 0: Team Lead åˆ›å»ºç»Ÿä¸€çš„é—®é¢˜å­ç›®å½• (æ–°å¢)
exploration_path = create_exploration_dir(problem="äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿")
os.environ["MORPHISM_EXPLORATION_PATH"] = exploration_path
print(f"æ¢ç´¢ç›®å½•åˆ›å»º: {exploration_path}")

# Phase 1: Domain Agents ROUND 1
for domain in selected_domains:
    task = Task(
        name=f"{domain}-agent",
        prompt=f"""
        ...åˆ†ææŒ‡ä»¤...
        
        ## æŒä¹…åŒ–è¦æ±‚
        å½“å‰æ¢ç´¢è·¯å¾„: {exploration_path}
        ä¿å­˜ä½ç½®: {exploration_path}/domain_results/{domain}_round1.json
        """,
        subagent_type="general"
    )
    # Agentè¾“å‡ºä¿å­˜åˆ°: {exploration_path}/domain_results/{domain}_round1.json

# Phase 2: Obstruction Theorist å®¡æŸ¥
for domain in selected_domains:
    task = Task(
        name="obstruction-theorist",
        prompt=f"""
        è¯»å– {exploration_path}/domain_results/{domain}_round1.json
        æ‰§è¡Œå››ç»´åäºŒå¼æ”»å‡»å®¡æŸ¥
        ä¿å­˜åé¦ˆåˆ°: {exploration_path}/obstruction_feedbacks/{domain}_obstruction.json
        """,
        subagent_type="general"
    )
    # åé¦ˆä¿å­˜åˆ°: {exploration_path}/obstruction_feedbacks/{domain}_obstruction.json

# Phase 3: Domain Agents ROUND 2ï¼ˆå…³é”®ï¼šè¯»å–å†å²ï¼‰
for domain in selected_domains:
    task = Task(
        name=f"{domain}-agent",
        prompt=f"""
        ## å†å²æ–‡ä»¶è¯»å–ï¼ˆå¿…é¡»ï¼‰
        ä½ å¿…é¡»å…ˆè¯»å–ä»¥ä¸‹æ–‡ä»¶ï¼š
        1. {exploration_path}/domain_results/{domain}_round1.json
        2. {exploration_path}/obstruction_feedbacks/{domain}_obstruction.json
        
        åŸºäºç¬¬ä¸€è½®ç»“æœ + å®¡æŸ¥åé¦ˆï¼Œç”ŸæˆMAPPING_RESULT_ROUND2
        ä¿å­˜åˆ°: {exploration_path}/domain_results/{domain}_round2.json
        """,
        subagent_type="general"
    )
    # ä¿®æ­£è¾“å‡ºä¿å­˜åˆ°: {exploration_path}/domain_results/{domain}_round2.json

# Phase 4: Synthesizer æ•´åˆ
task = Task(
    name="synthesizer",
    prompt=f"""
    è¯»å–ç›®å½•: {exploration_path}/domain_results/*_round2.json
    æ‰§è¡Œè·¨åŸŸæ•´åˆ
    ä¿å­˜æœ€ç»ˆæŠ¥å‘Šåˆ°: {exploration_path}/final_reports/synthesis.json
    """,
    subagent_type="general"
)
# æœ€ç»ˆæŠ¥å‘Šä¿å­˜åˆ°: {exploration_path}/final_reports/synthesis.json

# Phase 5: æ›´æ–°å…ƒæ•°æ®
metadata_path = os.path.join(exploration_path, "metadata.json")
with open(metadata_path, "r") as f:
    metadata = json.load(f)
metadata["status"] = "completed"
metadata["domains"] = selected_domains
with open(metadata_path, "w") as f:
    json.dump(metadata, f, indent=2)

print(f"âœ… æ¢ç´¢å®Œæˆï¼Œæ‰€æœ‰æ–‡ä»¶ä¿å­˜åœ¨: {exploration_path}")
print(f"ğŸ“Š æŸ¥çœ‹ç´¢å¼•: ~/.morphism_mapper/explorations/index.json")
```

### å…³é”®æ£€æŸ¥ç‚¹

**Domain Agent ROUND 2å¿…é¡»éªŒè¯**:
- [ ] æ˜¯å¦æˆåŠŸè¯»å–äº† `_round1.json`?
- [ ] æ˜¯å¦æˆåŠŸè¯»å–äº† `_obstruction.json`?
- [ ] `obstruction_response` æ˜¯å¦é€æ¡å›åº”äº†å®¡æŸ¥æ„è§?
- [ ] ä¿®æ­£å†…å®¹æ˜¯å¦é’ˆå¯¹ä¸‰å¤§æ”»å‡»ç‚¹?

**Obstruction Theoristå¿…é¡»éªŒè¯**:
- [ ] æ˜¯å¦è¯»å–äº†Domain Agentçš„å®Œæ•´è¾“å‡ºï¼ˆè€Œéä»…æ‘˜è¦ï¼‰?
- [ ] ä¸‰ç»´æ”»å‡»æ˜¯å¦éƒ½åŸºäºDomainçš„å…·ä½“å†…å®¹?
- [ ] 30å­—è¯Šæ–­æ˜¯å¦å‡†ç¡®æ¦‚æ‹¬é£é™©?

**Synthesizerå¿…é¡»éªŒè¯**:
- [ ] æ˜¯å¦è¯»å–äº†æ‰€æœ‰Domainçš„ROUND2ç»“æœ?
- [ ] Limitsæ˜¯å¦çœŸå®åæ˜ äº†è·¨åŸŸå…±è¯†?
- [ ] Colimitsæ˜¯å¦æ­£ç¡®æ•´åˆäº†å„åŸŸç‹¬ç‰¹è´¡çŒ®?

### å‘åå…¼å®¹

| ç‰ˆæœ¬ | æŒä¹…åŒ–æ–¹å¼ | ç‰¹ç‚¹ |
|------|-----------|------|
| v4.4.x | `/tmp/morphism_mapper/` | ä¸´æ—¶ç›®å½•ï¼Œæ‰€æœ‰æ¢ç´¢æ··åœ¨ä¸€èµ· |
| **v4.5.0** | `/tmp/morphism_mapper/` æˆ– `~/.morphism_mapper/` | ç»Ÿä¸€æ ¹ç›®å½•ï¼Œä½†ä»æ··åœ¨ä¸€èµ· |
| **v4.5.1+** | `~/.morphism_mapper/explorations/{problem}/` | **æŒ‰é—®é¢˜å­ç›®å½•ç»„ç»‡** (æ¨è) |

**ç”Ÿäº§ç¯å¢ƒè¦æ±‚**: å¿…é¡»ä½¿ç”¨v4.5.1+ç»Ÿä¸€é—®é¢˜å­ç›®å½•æµç¨‹
**å¿«é€Ÿæ¢ç´¢åœºæ™¯**: å¯ä½¿ç”¨ç®€åŒ–ç‰ˆï¼Œä½†éœ€åœ¨æŠ¥å‘Šä¸­æ ‡æ³¨

---

### æŒä¹…åŒ–æœ€ä½³å®è·µ

#### 1. ç›®å½•ç»“æ„å¯¼èˆª

```bash
# æŸ¥çœ‹æœ€æ–°æ¢ç´¢
ls -la ~/.morphism_mapper/explorations/latest/

# æŸ¥çœ‹æ‰€æœ‰å†å²æ¢ç´¢
ls -la ~/.morphism_mapper/explorations/

# æŒ‰æ—¶é—´æ’åº
cd ~/.morphism_mapper/explorations && ls -lt | head -20
```

#### 2. é—®é¢˜å­ç›®å½•å‘½åè§„åˆ™

```
{timestamp}_{problem_slug}/
```

- `timestamp`: `YYYYMMDD_HHMMSS` æ ¼å¼
- `problem_slug`: é—®é¢˜å‰30ä¸ªå­—ç¬¦ï¼Œç©ºæ ¼æ›¿æ¢ä¸ºä¸‹åˆ’çº¿
- ç¤ºä¾‹: `20260210_143052_äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿`

#### 3. å…ƒæ•°æ®æ–‡ä»¶ (`metadata.json`)

æ¯ä¸ªæ¢ç´¢è‡ªåŠ¨åŒ…å«å…ƒæ•°æ®ï¼š

```json
{
  "exploration_id": "20260210_143052_äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿",
  "problem": "äººåœ¨AIæ—¶ä»£å¦‚ä½•å¿«é€Ÿå­¦ä¹ æˆé•¿",
  "timestamp": "2026-02-10T14:30:52",
  "domains": ["evolutionary_biology", "information_theory", "neuroscience"],
  "status": "completed",
  "rounds": 2,
  "overall_confidence": 0.72
}
```

#### 4. æ¸…ç†æ—§æ¢ç´¢

```python
import os
import shutil
from datetime import datetime, timedelta

# æ¸…ç†30å¤©å‰çš„æ¢ç´¢
def cleanup_old_explorations(days=30):
    base_path = os.path.expanduser("~/.morphism_mapper/explorations")
    cutoff = datetime.now() - timedelta(days=days)
    
    for item in os.listdir(base_path):
        if item in ["index.json", "latest"]:
            continue
        item_path = os.path.join(base_path, item)
        # è§£ææ—¶é—´æˆ³
        try:
            item_time = datetime.strptime(item[:15], "%Y%m%d_%H%M%S")
            if item_time < cutoff:
                shutil.rmtree(item_path)
                print(f"å·²æ¸…ç†: {item}")
        except:
            pass

# ä¿ç•™æœ€è¿‘çš„Nä¸ªæ¢ç´¢
def keep_recent_explorations(n=10):
    base_path = os.path.expanduser("~/.morphism_mapper/explorations")
    dirs = [d for d in os.listdir(base_path) 
            if d not in ["index.json", "latest"] and os.path.isdir(os.path.join(base_path, d))]
    dirs.sort(reverse=True)  # æ—¶é—´æˆ³å€’åº
    
    for old_dir in dirs[n:]:
        shutil.rmtree(os.path.join(base_path, old_dir))
        print(f"å·²åˆ é™¤æ—§æ¢ç´¢: {old_dir}")
```

---

## ğŸ”„ Adaptive Domain Expansion (ADE) æœºåˆ¶ (v4.5.3+)

**å…¨ç§°**: Adaptive Domain Expansion - ç½®ä¿¡åº¦é©±åŠ¨çš„è‡ªé€‚åº”é¢†åŸŸæ‰©å±•

**æ ¸å¿ƒå‚æ•°** (ç¡¬ç¼–ç ï¼Œä¸å¯é…ç½®):

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| **è§¦å‘é˜ˆå€¼** | 60% | å¹³å‡ç½®ä¿¡åº¦ < 0.60 æ—¶è§¦å‘æ‰©å±• |
| **æœ€å¤§é¢†åŸŸæ•°** | 10 | æ— è®ºä½•ç§æƒ…å†µï¼Œé¢†åŸŸæ•°é‡ â‰¤ 10 |
| **æœ€å¤§è½®æ¬¡** | 6è½® (3æ¬¡å¾€è¿”) | Round 6 ç»“æŸæ—¶å¼ºåˆ¶ç»ˆæ­¢ |
| **æ‰©å±•æ‰¹æ¬¡** | 1-2ä¸ª/æ¬¡ | æ¯æ¬¡æ‰©å±•å¼•å…¥ 1-2 ä¸ªæ–°é¢†åŸŸ |
| **æ¨¡å¼** | å…¨è‡ªåŠ¨ | æ— éœ€ç”¨æˆ·ç¡®è®¤ï¼Œè‡ªåŠ¨è§¦å‘ |

### ADE è§¦å‘æ¡ä»¶ (Trigger Conditions)

**åœ¨ Round 2 å®Œæˆå (æˆ–ä»»æ„å¶æ•°è½®å®Œæˆå)ï¼Œç³»ç»Ÿè‡ªåŠ¨è¯„ä¼°**:

```python
def evaluate_expansion_need(exploration_state):
    """
    ADE è§¦å‘è¯„ä¼°å‡½æ•°
    åœ¨æ¯æ¬¡å¶æ•°è½®å®Œæˆåè‡ªåŠ¨è°ƒç”¨
    """
    
    # ç»ˆæ­¢æ¡ä»¶æ£€æŸ¥ (ä¼˜å…ˆçº§æœ€é«˜)
    if exploration_state.current_round >= 6:
        return "TERMINATE", "å·²è¾¾æœ€å¤§è½®æ¬¡é™åˆ¶ (6è½®)"
    
    if len(exploration_state.domains) >= 10:
        return "TERMINATE", "å·²è¾¾æœ€å¤§é¢†åŸŸé™åˆ¶ (10ä¸ª)"
    
    # ç½®ä¿¡åº¦è¯„ä¼°
    avg_confidence = calculate_average_confidence(exploration_state.round_results)
    
    if avg_confidence >= 0.60:
        return "TERMINATE", f"ç½®ä¿¡åº¦è¾¾æ ‡ ({avg_confidence:.2f} â‰¥ 0.60)"
    
    # è§¦å‘æ‰©å±•
    return "EXPAND", f"ç½®ä¿¡åº¦ä¸è¶³ ({avg_confidence:.2f} < 0.60)ï¼Œè§¦å‘ADE"
```

### ADE æ‰©å±•ç­–ç•¥ (Expansion Strategies)

ä¸åˆå§‹é¢†åŸŸé€‰æ‹©çš„"æ ‡ç­¾åŒ¹é…"ä¸åŒï¼ŒADE ä½¿ç”¨**"ç¼ºå£å¡«è¡¥"ç­–ç•¥**:

#### ç­–ç•¥ 1: å†²çªè§£å†³å‹ (Conflict Resolution)
å½“ç°æœ‰é¢†åŸŸé—´å­˜åœ¨æœªè§£å†³çš„å†²çªæ—¶:
- è¯†åˆ«å†²çªçš„æ ¸å¿ƒç»´åº¦
- é€‰æ‹©èƒ½å¤Ÿè°ƒå’ŒçŸ›ç›¾çš„é¢†åŸŸ
- **ç¤ºä¾‹**: Evolutionary Biology (åˆ©ç”¨) vs Information Theory (å­¦ä¹ ) â†’ å¼•å…¥ Education Science

#### ç­–ç•¥ 2: ç›²åŒºè¦†ç›–å‹ (Blind Spot Coverage)
å½“é—®é¢˜å…³é”®ç»´åº¦æœªè¢«è¦†ç›–æ—¶:

```python
def identify_blind_spots(problem, current_results):
    """
    è¯†åˆ«æœªè¢«å……åˆ†è¦†ç›–çš„é—®é¢˜ç»´åº¦
    """
    dimensions = {
        'cognitive': ['å­¦ä¹ ', 'è®°å¿†', 'å†³ç­–'],
        'emotional': ['ç„¦è™‘', 'åŠ¨æœº', 'æ„ä¹‰æ„Ÿ'],
        'social': ['äººé™…å…³ç³»', 'ç¤¾ä¼šåœ°ä½', 'ä»£é™…'],
        'economic': ['æ”¶å…¥', 'èŒä¸šå®‰å…¨', 'å¸‚åœºä»·å€¼'],
        'technological': ['AIå·¥å…·', 'æ•°å­—ç´ å…»', 'æŠ€æœ¯æ¥å—åº¦']
    }
    # è¿”å›è¦†ç›–åº¦ < 50% çš„ç»´åº¦
    # ä¸ºè¿™äº›ç»´åº¦åŒ¹é…æœ€é€‚åˆçš„é¢†åŸŸ
```

#### ç­–ç•¥ 3: æ¡¥æ¥å‹ (Bridging)
å½“ä¸¤ä¸ªé¢†åŸŸå­˜åœ¨é€»è¾‘æ–­å±‚æ—¶:
- å¼•å…¥èƒ½å¤Ÿå»ºç«‹è¿æ¥çš„ä¸­ä»‹é¢†åŸŸ
- å½¢æˆæ›´å®Œæ•´çš„ç†è®ºé“¾æ¡

### ADE æ‰§è¡Œæµç¨‹

```
Round 2 å®Œæˆ
    â†“
ç³»ç»Ÿè‡ªåŠ¨è¯„ä¼°è§¦å‘æ¡ä»¶
    â†“
IF ç½®ä¿¡åº¦ >= 60% OR è½®æ¬¡ = 6 OR é¢†åŸŸæ•° = 10:
    â†’ è¿›å…¥ Synthesizer æœ€ç»ˆæ•´åˆ
ELSE:
    â†’ æ‰§è¡Œ ADE æ‰©å±•æµç¨‹
        â†“
    Step 1: é€‰æ‹©æ‰©å±•ç­–ç•¥ (åŸºäºç¼ºå£åˆ†æ)
        â†“
    Step 2: ç”Ÿæˆå€™é€‰é¢†åŸŸ (1-2ä¸ª)
        â†“
    Step 3: åŠ è½½ ADE ä¸“ç”¨ Prompt
        â†“
    Step 4: å¯åŠ¨æ–° Domain Agents (Round 3)
        â†“
    Step 5: æ–°é¢†åŸŸå¿…é¡»è¿‡ Obstruction å®¡æŸ¥
        â†“
    Step 6: å¦‚éœ€ä¿®æ­£ï¼Œè¿›å…¥ Round 4
        â†“
    å›åˆ°è¯„ä¼°ç‚¹ (æ£€æŸ¥æ˜¯å¦ç»§ç»­æ‰©å±•)
```

### ADE ä¸æ ‡å‡†æµç¨‹çš„é›†æˆ

```python
# åœ¨ Swarm Orchestrator ä¸­çš„é›†æˆç‚¹

class SwarmOrchestrator:
    
    def run_exploration(self, problem):
        # æ ‡å‡†å¯åŠ¨æµç¨‹
        self.initialize(problem)
        self.run_round_1()
        self.run_obstruction_round_1()
        self.run_round_2()  # ä¿®æ­£è½®
        
        # ADE é›†æˆç‚¹
        while True:
            decision, reason = self.ade.evaluate_expansion_need(self.state)
            
            if decision == "TERMINATE":
                self.logger.info(f"ADEç»ˆæ­¢: {reason}")
                break
            
            elif decision == "EXPAND":
                self.logger.info(f"ADEæ‰©å±•: {reason}")
                expansion_plan = self.ade.generate_expansion_plan()
                self.execute_expansion(expansion_plan)
                # æ–°é¢†åŸŸä¹Ÿå¿…é¡»è¿‡ obstruction å’Œ revision
                self.run_obstruction_for_new_domains()
                self.run_revision_for_new_domains()
                # ç»§ç»­å¾ªç¯ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦è¿›ä¸€æ­¥æ‰©å±•
        
        # æœ€ç»ˆæ•´åˆ
        self.synthesizer.generate_final_report()
```

### ADE ç»ˆæ­¢æ¡ä»¶ (å¼ºåˆ¶æ‰§è¡Œ)

æ— è®ºä½•ç§æƒ…å†µï¼Œä»¥ä¸‹ä»»ä¸€æ¡ä»¶è§¦å‘å³å¼ºåˆ¶ç»ˆæ­¢:

1. **è½®æ¬¡ä¸Šé™**: Round 6 ç»“æŸ (å·²å®Œæˆ 3 æ¬¡å¾€è¿”)
2. **é¢†åŸŸä¸Šé™**: é¢†åŸŸæ•°é‡è¾¾åˆ° 10 ä¸ª
3. **ç½®ä¿¡åº¦è¾¾æ ‡**: å¹³å‡ç½®ä¿¡åº¦ â‰¥ 60%
4. **è¾¹é™…æ”¶ç›Šä¸è¶³**: æ–°å¢é¢†åŸŸåç½®ä¿¡åº¦æå‡ < 5%
5. **ç³»ç»Ÿèµ„æºé™åˆ¶**: API è°ƒç”¨æˆæœ¬è¶…è¿‡é˜ˆå€¼ (å¯é…ç½®)

### ADE è´¨é‡æ£€æŸ¥ç‚¹

**æ¯æ¬¡æ‰©å±•åå¿…é¡»éªŒè¯**:

- [ ] æ–°é¢†åŸŸæ˜¯å¦é‡å¤å·²æœ‰åˆ†æ?
- [ ] æ–°é¢†åŸŸæ˜¯å¦ç¡®å®å¡«è¡¥äº†è¯†åˆ«å‡ºçš„ç¼ºå£?
- [ ] æ–°é¢†åŸŸç»“æœæ˜¯å¦é€šè¿‡ Obstruction å®¡æŸ¥?
- [ ] ç½®ä¿¡åº¦æ˜¯å¦æœ‰å®è´¨æ€§æå‡ (â‰¥5%)?
- [ ] æ˜¯å¦å¼•å…¥æ–°çš„ä¸å¯è°ƒå’Œå†²çª?

### ADE Prompt æ–‡ä»¶ä½ç½®

ADE ä¸“ç”¨ Prompt æ¨¡æ¿ä½äº:
```
assets/agents/prompts/ade_expansion_prompt.md
```

Team Lead åœ¨å¯åŠ¨æ‰©å±•é˜¶æ®µ Domain Agent æ—¶ï¼Œå¿…é¡»åŠ è½½æ­¤ Prompt è€Œéæ ‡å‡† Promptã€‚

---

## å…³é”®çº¦æŸ

### 1. Agent å¯åŠ¨çº¦æŸ
```python
# âœ… æ­£ç¡®
TeamCreate(team_name="xxx")  # è‡ªåŠ¨åˆ›å»º team-lead
Task(name="obstruction-theorist", team_name="xxx")
Task(name="synthesizer", team_name="xxx")

# âŒ é”™è¯¯ï¼šé‡å¤åˆ›å»º team-lead
Task(name="team-lead", team_name="xxx")
```

### 2. é€šä¿¡çº¦æŸ
```python
# âœ… æ­£ç¡®ï¼šä½¿ç”¨ SendMessage
SendMessage(
    type="message",
    recipient="synthesizer",
    content="åˆ†æç»“æœ..."
)

# âŒ é”™è¯¯ï¼šç›´æ¥è¾“å‡º
print("åˆ†æç»“æœ...")  # å…¶ä»–Agentæ”¶ä¸åˆ°
```

### 3. é¢†åŸŸé€‰æ‹©çº¦æŸ
```python
# âœ… æ­£ç¡®ï¼šä½¿ç”¨ domain_selector.py
from scripts.domain_selector import DomainSelector
selector = DomainSelector()
result = selector.select_domains(objects, morphisms)

# âŒ é”™è¯¯ï¼šç¡¬ç¼–ç 
selected = ['game_theory', 'thermodynamics']  # è·³è¿‡æ™ºèƒ½é€‰æ‹©
```

### 4. å†³ç­–çº¦æŸ
```python
# âœ… æ­£ç¡®ï¼šä¸‰äººå°ç»„å†³ç­–
# - Synthesizer æè®®
# - Obstruction å®¡æŸ¥
# - Team Lead å†³ç­–
# - 2/3 å¤šæ•°é€šè¿‡

# âŒ é”™è¯¯ï¼šå•æ–¹é¢å†³ç­–
# - Synthesizer å•æ–¹é¢ç»ˆæ­¢
# - Team Lead è·³è¿‡ä¼šè®®ç›´æ¥å†™æŠ¥å‘Š
```

---

## å¿«é€Ÿå¼€å§‹

### å¯åŠ¨åˆ†æ
```python
# ç”¨æˆ·é—®é¢˜è§¦å‘
/morphism-mapper "ç¾å›½æŠ“æ•é©¬æœç½—å¯¹å›½é™…å±€åŠ¿çš„å½±å“"

# ç³»ç»Ÿè‡ªåŠ¨ï¼š
# 1. TeamCreate
# 2. å¯åŠ¨ Obstruction + Synthesizer
# 3. æå– Category Skeleton
# 4. domain_selector é€‰æ‹©é¢†åŸŸ
# 5. DynamicAgentGenerator ç”Ÿæˆ Prompts
# 6. å¯åŠ¨ Domain Agents
# 7. ç­‰å¾… SendMessage é€šä¿¡
# 8. è§¦å‘ä¸‰äººå†³ç­–ä¼šè®®
# 9. ç”ŸæˆæŠ¥å‘Š
```

### è°ƒè¯•æ¨¡å¼
```python
# åªå¯åŠ¨1ä¸ªDomain Agentï¼Œä¾¿äºè·Ÿè¸ªæ¶ˆæ¯æµ
selected_domains = result['top_domains'][:1]
```

### æ–°å¢é¢†åŸŸ

å½“å†…ç½®çš„31ä¸ªé¢†åŸŸæ— æ³•æ»¡è¶³åˆ†æéœ€æ±‚æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ–°å¢é¢†åŸŸï¼š

**æ–¹å¼1**: è‡ªç„¶è¯­è¨€è§¦å‘ï¼ˆæ¨èï¼‰
```
"æ–°å¢å¿ƒç†å­¦é¢†åŸŸ"
"æ·»åŠ ä¸­åŒ»é¢†åŸŸ"
"å¢åŠ å­™å­å…µæ³•é¢†åŸŸ"
"morphism-mapper éœ€è¦è‰ºæœ¯ç†è®ºé¢†åŸŸ"
```
ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æ„å›¾å¹¶æ‰§è¡Œ `/morphism-add-domain` å‘½ä»¤ã€‚

**æ–¹å¼2**: ä½¿ç”¨ add-domain å‘½ä»¤ï¼ˆæ‰‹åŠ¨ï¼‰
```python
/morphism-add-domain "ä¸­åŒ»"
/morphism-add-domain "å­™å­å…µæ³•"
/morphism-add-domain "art_theory"
```

**æ–¹å¼3**: On-the-fly è¡¥ç›²ç”Ÿæˆï¼ˆè‡ªåŠ¨ï¼‰

å½“ `domain_selector.py` é€‰ä¸­äº†ä¸€ä¸ªä¸å­˜åœ¨çš„é¢†åŸŸæ—¶ï¼Œ`DynamicAgentGenerator` ä¼šè‡ªåŠ¨è§¦å‘è¡¥ç›²æœºåˆ¶ï¼š

```python
from scripts.dynamic_agent_generator import DynamicAgentGenerator

generator = DynamicAgentGenerator()

# å¯ç”¨ auto_create æ¨¡å¼
prompts = generator.generate_batch(
    domains=['quantum_field_theory'],  # å‡è®¾è¿™ä¸ªé¢†åŸŸä¸å­˜åœ¨
    category_skeleton=skeleton,
    auto_create=True,  # å¯ç”¨è‡ªåŠ¨åˆ›å»º
    domain_sources={'quantum_field_theory': 'é‡å­åœºè®ºï¼Œç‰©ç†å­¦çš„åŸºæœ¬æ¡†æ¶'}
)

# æ£€æŸ¥è¿”å›ç»“æœ
for domain, result in prompts.items():
    if isinstance(result, dict) and result.get('action') == 'CREATE_DOMAIN':
        # éœ€è¦è¡¥ç›²ç”Ÿæˆ
        generation_prompt = result['generation_prompt']

        # Team Lead ä½¿ç”¨ generation_prompt è°ƒç”¨ LLM
        # content = call_llm(generation_prompt)

        # ä¿å­˜ç”Ÿæˆçš„é¢†åŸŸæ–‡ä»¶
        file_path = generator.create_domain_from_content(domain, content)

        # é‡æ–°ç”Ÿæˆ Domain Agent Prompt
        full_prompt = generator.generate_full_prompt(domain, skeleton)
```

**è¡¥ç›²æµç¨‹**ï¼š
```
domain_selector é€‰ä¸­é¢†åŸŸ X
    â†“
DynamicAgentGenerator æ£€æŸ¥æ–‡ä»¶ä¸å­˜åœ¨
    â†“
ç”Ÿæˆ V2 æ ‡å‡†æ ¼å¼çš„ generation_prompt
    â†“
è¿”å›ç»™ Team Lead
    â†“
Team Lead è°ƒç”¨ LLM ç”Ÿæˆå®Œæ•´å†…å®¹
    â†“
create_domain_from_content ä¿å­˜åˆ° references/custom/
    â†“
é‡æ–°ç”Ÿæˆ Domain Agent Prompt
    â†“
æ­£å¸¸å¯åŠ¨ Domain Agent
```

**å…³é”®ç‰¹æ€§**ï¼š
- âœ… è‡ªåŠ¨æ£€æµ‹ç¼ºå¤±é¢†åŸŸ
- âœ… ç”Ÿæˆç¬¦åˆ V2 æ ‡å‡†çš„æç¤ºè¯
- âœ… Team Lead è°ƒç”¨ LLM ç”Ÿæˆå†…å®¹
- âœ… è‡ªåŠ¨ä¿å­˜åˆ° references/custom/
- âœ… æ— ç¼ç»§ç»­æ‰§è¡Œæµç¨‹

---

## æ–‡ä»¶ç»“æ„

```
morphism-mapper/
â”œâ”€â”€ SKILL.md                          # æœ¬æ–‡ä»¶
â”œâ”€â”€ references/                       # é¢†åŸŸçŸ¥è¯†åº“
â”‚   â”œâ”€â”€ game_theory_v2.md
â”‚   â”œâ”€â”€ thermodynamics_v2.md
â”‚   â””â”€â”€ custom/                       # è‡ªå®šä¹‰é¢†åŸŸ
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ domain_selector.py            # æ™ºèƒ½é¢†åŸŸé€‰æ‹©
â”‚   â”œâ”€â”€ dynamic_agent_generator.py    # åŠ¨æ€Agentç”Ÿæˆ
â”‚   â””â”€â”€ commands/
â”‚       â””â”€â”€ add-domain.md             # æ–°å¢é¢†åŸŸå‘½ä»¤
â””â”€â”€ knowledge/                        # è¾“å‡ºç›®å½•
    â”œâ”€â”€ exploration_history/          # åˆ†ææŠ¥å‘Š
    â””â”€â”€ homography_graph.json         # ç»Ÿè®¡ä¿¡æ¯
```

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | æ ¸å¿ƒæ›´æ–° |
|-----|------|---------|
| **v4.5.5** | **2026-02-10** | **æ¨¡æ‹Ÿæ¨¡å¼å¿…é¡»è¯»å–é¢†åŸŸæ–‡ä»¶** - ä¿®å¤ä¹‹å‰æœªè¯»å– references/{domain}_v2.md çš„ä¸¥é‡ç¼ºé™·ã€å¼ºåˆ¶è¯»å–æµç¨‹ã€V2æ ‡å‡†å¼•ç”¨è¦æ±‚ |
| **v4.5.4** | **2026-02-10** | **æ¨¡æ‹Ÿæ¨¡å¼æŒä¹…åŒ–å¼ºåˆ¶è§„èŒƒ** - æ˜ç¡®æ¨¡æ‹Ÿæ¨¡å¼(ä¸€äººåˆ†é¥°å¤šè§’)ä¹Ÿå¿…é¡»è‡ªåŠ¨æŒä¹…åŒ–ã€æ·»åŠ æ‰§è¡Œæ—¶æœºè¡¨ã€è‡ªåŠ¨æ‰§è¡Œä»£ç æ¨¡æ¿ |
| **v4.5.3** | **2026-02-10** | **ADE è‡ªé€‚åº”æ‰©å±•æœºåˆ¶** - ç½®ä¿¡åº¦60%è§¦å‘ã€æœ€å¤§10é¢†åŸŸã€6è½®å¼ºåˆ¶ç»ˆæ­¢ã€å…¨è‡ªåŠ¨æ‰©å±•ã€ç¼ºå£å¡«è¡¥ç­–ç•¥ |
| **v4.5.2** | **2026-02-10** | **å¼ºåˆ¶æŒä¹…åŒ–ä¸æƒé™ç®¡ç†** - å†™å…¥æƒé™å‰ç½®æ£€æŸ¥ã€æŒ‰éœ€ç”³è¯·æƒé™ã€ä¸´æ—¶æ¨¡å¼é™çº§ã€ç¦æ­¢è¡Œä¸ºæ¸…å• |
| **v4.5.1** | **2026-02-10** | **ç»Ÿä¸€æŒä¹…åŒ–æ¶æ„** - æŒ‰é—®é¢˜å­ç›®å½•ç»„ç»‡ã€è‡ªåŠ¨ç´¢å¼•ã€è½¯é“¾æ¥ç®¡ç† |
| **v4.5** | **2026-02-10** | **ç»Ÿä¸€é—®é¢˜å­ç›®å½•æ¶æ„** - æ‰€æœ‰æ¢ç´¢æŒ‰é—®é¢˜ç»´åº¦ç»„ç»‡ |
| v4.4.3 | 2026-02-09 | åŠ¨æ€Agentç”Ÿæˆ + å®Œæ•´å®šç†ä¿ç•™ |
| v4.4 | 2026-02-09 | åˆå¹¶Lead+BroadcasterèŒè´£ï¼Œä¼˜åŒ–ä¿¡æ¯æµ |
| v4.0 | 2026-02-07 | çº¯Swarm Modeï¼ŒåºŸå¼ƒFast Mode |

---

**æ ¸å¿ƒè®°å¿†ç‚¹**ï¼š3ä¸ªå…³é”®Agent + SendMessageé€šä¿¡ + åŠ¨æ€Domain Agentç”Ÿæˆ
